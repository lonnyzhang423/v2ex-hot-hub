[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/38af/8613/176_large.png?m=1644885960", "name": "car", "avatar_normal": "https://cdn.v2ex.com/navatar/38af/8613/176_normal.png?m=1644885960", "title": "汽车", "url": "https://www.v2ex.com/go/car", "topics": 2316, "footer": "", "header": "关于买车、开车及汽车文化的技术讨论", "title_alternative": "Car", "avatar_mini": "https://cdn.v2ex.com/navatar/38af/8613/176_mini.png?m=1644885960", "stars": 1940, "aliases": [], "root": false, "id": 176, "parent_node_name": "life"}, "member": {"id": 668443, "username": "dawenxi11", "url": "https://www.v2ex.com/u/dawenxi11", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/930b/c002/668443_mini.png?m=1706174225", "avatar_normal": "https://cdn.v2ex.com/avatar/930b/c002/668443_normal.png?m=1706174225", "avatar_large": "https://cdn.v2ex.com/avatar/930b/c002/668443_large.png?m=1706174225", "avatar_xlarge": "https://cdn.v2ex.com/avatar/930b/c002/668443_xlarge.png?m=1706174225", "created": 1703496274, "last_modified": 1706174225}, "last_reply_by": "leeggco", "last_touched": 1725271624, "title": "卖车被骗 8.4W，如何维权？", "url": "https://www.v2ex.com/t/1069549", "created": 1725246669, "deleted": 0, "content": "上周发生的事情，发出来给兄弟们吸取教训。\r\n\r\n本人有台凯迪拉克 CT4 ，由于闲置就想卖掉还点房贷，于是闲鱼上挂了几天，基本上车商报的价都在 11 多一点，离我预期 12 还差一点，就想等等有缘人，反正也不急卖。\r\n\r\n结果上周四晚上下班回家接到电话，说是收车的，就在我们 20 多公里的地方，开车过去 40 分钟。说是 13+能收，他们正好有客户要这款车，所以价格比较高。 我跟他确认了一下能否当场签合同，他说能，但是车款可能要分两次结清，先给 9w ，尾款等周一再给我转。我当时就来劲了，还有这种好事，关键人家还先给我转了 200 块钱油费（要我发收款码，事后我看了转账人也不是他），说让我去找他。\r\n\r\n于是晚上 10 点左右我跟媳妇开车到了他发的位置，他们两个人，一个开 m4 的，负责验车，他自己开了个帕美，我当时还心想，二手车都这么赚钱吗。。。验完车后他把合同拿出来，正准备签的时候他给我说，今天可能结不了车款，说是刚刚收了台别的车，钱转出去了，让我把他们那台 m4 开回去，等周一车款到位了再叫代驾还给他（来之前电话里就跟我提过，我拒绝了，理由是我平时不怎么用车，家里还有一辆电车，没必要），过程中就是要我把 m4 开走的意愿非常明显，直到我跟媳妇明确拒绝了不用 m4 。\r\n\r\n其实来之前包括整个过程都已经感觉到很奇怪了，但是人呐就是这样，在利益面前明知道事情不对还是选择往陷阱里面跳。我跟媳妇商量了一下，觉得不放心，于是要求他先打款，然后他去打了个电话（事后推测这个时候他已经联系好车商了）。过了一会过来跟我们说，他们收车的资方现在从宁波过来，先给我 5 个 w ，要我们等一个小时左右，期间又给我和媳妇说不放心就把 m4 先开走。我跟媳妇心想，反正有合同签的，m4 就不开了，让他们跟我们一起开车到我家附近，他所谓的（资方）也去我们家附近收，这样既节省时间，还不用我们打车回去。\r\n\r\n晚上 11 点，我们在小区外面马路边签完了合同，当场给我转了 5w （当然也不是他转的，他叫来的大哥转的），过户手续视频什么的资料我也全部给了他。我全程只跟他自己沟通过，他叫来收车的包括他所谓的（资方）都跟我没有直接接触。当时也是单纯，觉得他一个 03 年的小伙子，应该不会有什么坏心思。于是各回各家，当时心里还觉得自己挺幸运的，有点美滋滋。签合同之前和之后我跟媳妇都在推测为什么他们出价会这么高，一路上都在给他们找理由满足自己的不安。按照他们的说法，他们是把车收去给他们的客户，他们客户过户之后找银行抵押贷款，银行评估价格会比他们收车价高，他们赚中间差价。至于违约什么的，我们也管不着。我们当时还感叹：饿死胆小的，撑死胆大的。\r\n\r\n第二天是周五，好奇心驱使下我点开安吉星开了一下行程记录，发现去了车辆检测站和车管所各种地方，也没在意，毕竟当时我还没有真正的起疑心。直到周六晚上，我跟媳妇在民宿附近散步的时候他打了电话过来，开始支支吾吾的说的什么资方啊，尾款啊什么的，反正最后的意思是问我借 6000 块钱！！！，我当时还跟他确认了一下：你是要找我借钱？？？我心想我跟你也不熟啊，然后一股不安的感觉涌上心头，当时其实就已经确定是被骗了，心里面也接受了这个现实，之所以能这么轻松的接受其实我觉得整个过程中有太多的奇怪了，整个过程都是在自我安慰，直到这一刻真正的意识到。\r\n\r\n跟媳妇继续散完步，后面找了个烧烤摊坐下来吃点东西。这时候想到周五下午的时候咸鱼有个车商给我发消息（我合同是周四晚上签完的），给我发了两张照片，问我这是不是我的车，还真是，他说他 10.5 收的，问我怎么跑到宁波去卖，最后还是到了他手里。我当时还回复他，别人出价比你高不少呢，他回一句：怎么可能。我没理他。\r\n\r\n吃烧烤的过程中我还是有一丝侥幸心理，拿骗子的身份证查了一下失信人名单，果然不出我所料：他是失信人。联想到当时给我打车费 200 要我发收款码的事情，一切都能说得通了。\r\n\r\n烧烤回去的路上尝试报了警，说是合同签了不能立案，让我打当地派出所电话问问。心想着还是算了，等假期结束回去再说吧。期间多次微信电话联系骗子，摊牌了，答应我说周日再给我 4.3w 尾款，让我放心，周一肯定结清，我也知道是不可能的，无所谓了，于是发了一段合同诈骗的法律条文给他，让他想清楚，至今未回复我。\r\n\r\n今天周一，是合同约定的打尾款时间，我准备明天去派出所报案了。", "content_rendered": "上周发生的事情，发出来给兄弟们吸取教训。<br /><br />本人有台凯迪拉克 CT4 ，由于闲置就想卖掉还点房贷，于是闲鱼上挂了几天，基本上车商报的价都在 11 多一点，离我预期 12 还差一点，就想等等有缘人，反正也不急卖。<br /><br />结果上周四晚上下班回家接到电话，说是收车的，就在我们 20 多公里的地方，开车过去 40 分钟。说是 13+能收，他们正好有客户要这款车，所以价格比较高。 我跟他确认了一下能否当场签合同，他说能，但是车款可能要分两次结清，先给 9w ，尾款等周一再给我转。我当时就来劲了，还有这种好事，关键人家还先给我转了 200 块钱油费（要我发收款码，事后我看了转账人也不是他），说让我去找他。<br /><br />于是晚上 10 点左右我跟媳妇开车到了他发的位置，他们两个人，一个开 m4 的，负责验车，他自己开了个帕美，我当时还心想，二手车都这么赚钱吗。。。验完车后他把合同拿出来，正准备签的时候他给我说，今天可能结不了车款，说是刚刚收了台别的车，钱转出去了，让我把他们那台 m4 开回去，等周一车款到位了再叫代驾还给他（来之前电话里就跟我提过，我拒绝了，理由是我平时不怎么用车，家里还有一辆电车，没必要），过程中就是要我把 m4 开走的意愿非常明显，直到我跟媳妇明确拒绝了不用 m4 。<br /><br />其实来之前包括整个过程都已经感觉到很奇怪了，但是人呐就是这样，在利益面前明知道事情不对还是选择往陷阱里面跳。我跟媳妇商量了一下，觉得不放心，于是要求他先打款，然后他去打了个电话（事后推测这个时候他已经联系好车商了）。过了一会过来跟我们说，他们收车的资方现在从宁波过来，先给我 5 个 w ，要我们等一个小时左右，期间又给我和媳妇说不放心就把 m4 先开走。我跟媳妇心想，反正有合同签的，m4 就不开了，让他们跟我们一起开车到我家附近，他所谓的（资方）也去我们家附近收，这样既节省时间，还不用我们打车回去。<br /><br />晚上 11 点，我们在小区外面马路边签完了合同，当场给我转了 5w （当然也不是他转的，他叫来的大哥转的），过户手续视频什么的资料我也全部给了他。我全程只跟他自己沟通过，他叫来收车的包括他所谓的（资方）都跟我没有直接接触。当时也是单纯，觉得他一个 03 年的小伙子，应该不会有什么坏心思。于是各回各家，当时心里还觉得自己挺幸运的，有点美滋滋。签合同之前和之后我跟媳妇都在推测为什么他们出价会这么高，一路上都在给他们找理由满足自己的不安。按照他们的说法，他们是把车收去给他们的客户，他们客户过户之后找银行抵押贷款，银行评估价格会比他们收车价高，他们赚中间差价。至于违约什么的，我们也管不着。我们当时还感叹：饿死胆小的，撑死胆大的。<br /><br />第二天是周五，好奇心驱使下我点开安吉星开了一下行程记录，发现去了车辆检测站和车管所各种地方，也没在意，毕竟当时我还没有真正的起疑心。直到周六晚上，我跟媳妇在民宿附近散步的时候他打了电话过来，开始支支吾吾的说的什么资方啊，尾款啊什么的，反正最后的意思是问我借 6000 块钱！！！，我当时还跟他确认了一下：你是要找我借钱？？？我心想我跟你也不熟啊，然后一股不安的感觉涌上心头，当时其实就已经确定是被骗了，心里面也接受了这个现实，之所以能这么轻松的接受其实我觉得整个过程中有太多的奇怪了，整个过程都是在自我安慰，直到这一刻真正的意识到。<br /><br />跟媳妇继续散完步，后面找了个烧烤摊坐下来吃点东西。这时候想到周五下午的时候咸鱼有个车商给我发消息（我合同是周四晚上签完的），给我发了两张照片，问我这是不是我的车，还真是，他说他 10.5 收的，问我怎么跑到宁波去卖，最后还是到了他手里。我当时还回复他，别人出价比你高不少呢，他回一句：怎么可能。我没理他。<br /><br />吃烧烤的过程中我还是有一丝侥幸心理，拿骗子的身份证查了一下失信人名单，果然不出我所料：他是失信人。联想到当时给我打车费 200 要我发收款码的事情，一切都能说得通了。<br /><br />烧烤回去的路上尝试报了警，说是合同签了不能立案，让我打当地派出所电话问问。心想着还是算了，等假期结束回去再说吧。期间多次微信电话联系骗子，摊牌了，答应我说周日再给我 4.3w 尾款，让我放心，周一肯定结清，我也知道是不可能的，无所谓了，于是发了一段合同诈骗的法律条文给他，让他想清楚，至今未回复我。<br /><br />今天周一，是合同约定的打尾款时间，我准备明天去派出所报案了。", "last_modified": 1725254395, "replies": 196, "id": 1069549}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_large.png?m=1695370146", "name": "career", "avatar_normal": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_normal.png?m=1695370146", "title": "职场话题", "url": "https://www.v2ex.com/go/career", "topics": 17984, "footer": "", "header": "这里，我们聊聊那些工作中遇到的开心和不开心的事。", "title_alternative": "Career", "avatar_mini": "https://cdn.v2ex.com/navatar/4ea0/6fbc/770_mini.png?m=1695370146", "stars": 3221, "aliases": [], "root": false, "id": 770, "parent_node_name": "work"}, "member": {"id": 324508, "username": "itskingname", "url": "https://www.v2ex.com/u/itskingname", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/5469/969b/324508_mini.png?m=1532149726", "avatar_normal": "https://cdn.v2ex.com/avatar/5469/969b/324508_normal.png?m=1532149726", "avatar_large": "https://cdn.v2ex.com/avatar/5469/969b/324508_large.png?m=1532149726", "created": 1529883749, "last_modified": 1532149726}, "last_reply_by": "Martens", "last_touched": 1725270076, "title": "大家身边有没有这样的同事，喜欢把你的话重复一遍？", "url": "https://www.v2ex.com/t/1069513", "created": 1725243487, "deleted": 0, "content": "例如：\r\n\r\n```\r\n他：你中午在哪里吃的饭？\r\n我：我在楼下云南米线吃的\r\n他：你在楼下云南米线吃的是吧？\r\n\r\n他：这个 bug 是什么问题导致的？\r\n我：AWS 那边数据中心网络挂了，已经提工单。\r\n他：AWS 那边数据中心网络挂了，已经提工单是吧？\r\n\r\n他：你周末怎么过的？\r\n我：我在家打了一天游戏。\r\n他：你在家打了一天游戏是吧。\r\n……\r\n```\r\n\r\n\r\n基本上任何一个问题，他问了我，我回复以后，他都会重复一遍，再加上『是吧』。好像不这样反问，就不能理解我的回答一样。", "content_rendered": "<p>例如：</p>\n<pre><code>他：你中午在哪里吃的饭？\n我：我在楼下云南米线吃的\n他：你在楼下云南米线吃的是吧？\n\n他：这个 bug 是什么问题导致的？\n我：AWS 那边数据中心网络挂了，已经提工单。\n他：AWS 那边数据中心网络挂了，已经提工单是吧？\n\n他：你周末怎么过的？\n我：我在家打了一天游戏。\n他：你在家打了一天游戏是吧。\n……\n</code></pre>\n<p>基本上任何一个问题，他问了我，我回复以后，他都会重复一遍，再加上『是吧』。好像不这样反问，就不能理解我的回答一样。</p>\n", "last_modified": 1725246146, "replies": 128, "id": 1069513}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/38af/8613/176_large.png?m=1644885960", "name": "car", "avatar_normal": "https://cdn.v2ex.com/navatar/38af/8613/176_normal.png?m=1644885960", "title": "汽车", "url": "https://www.v2ex.com/go/car", "topics": 2316, "footer": "", "header": "关于买车、开车及汽车文化的技术讨论", "title_alternative": "Car", "avatar_mini": "https://cdn.v2ex.com/navatar/38af/8613/176_mini.png?m=1644885960", "stars": 1940, "aliases": [], "root": false, "id": 176, "parent_node_name": "life"}, "member": {"id": 547052, "username": "t4we", "url": "https://www.v2ex.com/u/t4we", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/gravatar/f85de639bb82e0f83cbf419a15fbb947?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/f85de639bb82e0f83cbf419a15fbb947?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/f85de639bb82e0f83cbf419a15fbb947?s=73&d=retro", "created": 1622623525, "last_modified": 1635474414}, "last_reply_by": "xiangyuecn", "last_touched": 1725270839, "title": "买房无望，是否应该拿所有积蓄换车", "url": "https://www.v2ex.com/t/1069615", "created": 1725259158, "deleted": 0, "content": "背景：奔三，上海打工，租房未婚，目前有一辆小电车在开。\r\n最近看上了 Macan EV ，算了算把老车卖掉钱够了，准备这周去交个定金。目前的环境看存钱买房不明智，但感觉花光所有积蓄买车也是有点慌，问问大家的意见。", "content_rendered": "<p>背景：奔三，上海打工，租房未婚，目前有一辆小电车在开。\n最近看上了 Macan EV ，算了算把老车卖掉钱够了，准备这周去交个定金。目前的环境看存钱买房不明智，但感觉花光所有积蓄买车也是有点慌，问问大家的意见。</p>\n", "last_modified": 1725259158, "replies": 127, "id": 1069615}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/301a/d0e3/834_large.png?m=1584400459", "name": "xiaomi", "avatar_normal": "https://cdn.v2ex.com/navatar/301a/d0e3/834_normal.png?m=1584400459", "title": "小米", "url": "https://www.v2ex.com/go/xiaomi", "topics": 1075, "footer": "", "header": "关于小米公司出品的各种智能硬件的使用讨论", "title_alternative": "Xiaomi", "avatar_mini": "https://cdn.v2ex.com/navatar/301a/d0e3/834_mini.png?m=1584400459", "stars": 401, "aliases": [], "root": false, "id": 834, "parent_node_name": "android"}, "member": {"id": 581194, "username": "clacf1", "url": "https://www.v2ex.com/u/clacf1", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/b6808ae1bc9be74a53d9f6719c5122c2?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/b6808ae1bc9be74a53d9f6719c5122c2?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/b6808ae1bc9be74a53d9f6719c5122c2?s=73&d=retro", "created": 1652232146, "last_modified": 1724636018}, "last_reply_by": "rockxsj", "last_touched": 1725271122, "title": "为什么骂小米的这么多，但是小米几乎每进入一个领域，销量都最高？", "url": "https://www.v2ex.com/t/1069554", "created": 1725247561, "deleted": 0, "content": "无论是小米汽车，还是小米家电，小米手机，miui 系统都被吐槽。\r\n\r\n但是看看销量，很多都是断层第一（小米电视，小米空调。。。），这是为什么呢？\r\n\r\n马上看着看着，小米汽车又要变成 20w+销量第一了。", "content_rendered": "无论是小米汽车，还是小米家电，小米手机，miui 系统都被吐槽。<br /><br />但是看看销量，很多都是断层第一（小米电视，小米空调。。。），这是为什么呢？<br /><br />马上看着看着，小米汽车又要变成 20w+销量第一了。", "last_modified": 1725252258, "replies": 115, "id": 1069554}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/b53b/3a3d/55_large.png?m=1611920927", "name": "games", "avatar_normal": "https://cdn.v2ex.com/navatar/b53b/3a3d/55_normal.png?m=1611920927", "title": "游戏", "url": "https://www.v2ex.com/go/games", "topics": 2797, "footer": "", "header": "Life is short, have more fun.", "title_alternative": "Games", "avatar_mini": "https://cdn.v2ex.com/navatar/b53b/3a3d/55_mini.png?m=1611920927", "stars": 2417, "aliases": [], "root": false, "id": 55, "parent_node_name": "computer"}, "member": {"id": 614912, "username": "Jokesy", "url": "https://www.v2ex.com/u/Jokesy", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/030b/cfc1/614912_mini.png?m=1725245017", "avatar_normal": "https://cdn.v2ex.com/avatar/030b/cfc1/614912_normal.png?m=1725245017", "avatar_large": "https://cdn.v2ex.com/avatar/030b/cfc1/614912_large.png?m=1725245017", "avatar_xlarge": "https://cdn.v2ex.com/avatar/030b/cfc1/614912_xlarge.png?m=1725245017", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/030b/cfc1/614912_xlarge.png?m=1725245017", "created": 1676776456, "last_modified": 1725245017}, "last_reply_by": "zysuper", "last_touched": 1725270679, "title": "各位多久时间完成黑神话悟空一周目？感觉那个关卡的怪最难打？", "url": "https://www.v2ex.com/t/1069536", "created": 1725245117, "deleted": 0, "content": "## 设备\r\n本人使用联想拯救者 R7000 ，显卡 1650 ，虽然配置低，但是勉强可以游玩。\r\n## 进度\r\n一周目：使用 64 小时，99 级完成通过\r\n![]( https://cdn-fusion.imgimg.cc/i/2024/41548619d750adc1.png)\r\n## boss 难度\r\n觉得比较难打 boss：\r\n\r\n- 1 、大头娃娃 [幽魂]  刚入手被虐 40 次左右  被打红温了\r\n- 2 、白衣秀士   30 次左右\r\n- 3 、虎先锋     35 次左右  3 拳打碎我的大圣梦\r\n- 4 、亢金龙     30 次左右\r\n- 5 、魔将妙音   15 次左右\r\n- 6 、黄眉大王   8 次左右\r\n- 7 、小黄龙     15 次左右\r\n- 8 、碧水金睛兽  10 次左右\r\n- 9 、二郎神杨载  15 次左右\r\n- 10 、大圣残躯    20 次左右\r\n\r\n![]( https://cdn-fusion.imgimg.cc/i/2024/21b7a0ed51ffd19d.jpg)\r\n![]( https://cdn-fusion.imgimg.cc/i/2024/dd92afc687421f11.jpg)\r\n\r\n\r\n\r\n## 流派\r\n蓄力硬钢流，上去莽就完事了\r\n\r\n## 感悟\r\n\r\n你们渴望成就大圣，\r\n而我，愿做平凡之人。", "content_rendered": "<h2>设备</h2>\n<p>本人使用联想拯救者 R7000 ，显卡 1650 ，虽然配置低，但是勉强可以游玩。</p>\n<h2>进度</h2>\n<p>一周目：使用 64 小时，99 级完成通过\n<img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://cdn-fusion.imgimg.cc/i/2024/41548619d750adc1.png\"/></p>\n<h2>boss 难度</h2>\n<p>觉得比较难打 boss：</p>\n<ul>\n<li>1 、大头娃娃 [幽魂]  刚入手被虐 40 次左右  被打红温了</li>\n<li>2 、白衣秀士   30 次左右</li>\n<li>3 、虎先锋     35 次左右  3 拳打碎我的大圣梦</li>\n<li>4 、亢金龙     30 次左右</li>\n<li>5 、魔将妙音   15 次左右</li>\n<li>6 、黄眉大王   8 次左右</li>\n<li>7 、小黄龙     15 次左右</li>\n<li>8 、碧水金睛兽  10 次左右</li>\n<li>9 、二郎神杨载  15 次左右</li>\n<li>10 、大圣残躯    20 次左右</li>\n</ul>\n<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://cdn-fusion.imgimg.cc/i/2024/21b7a0ed51ffd19d.jpg\"/>\n<img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://cdn-fusion.imgimg.cc/i/2024/dd92afc687421f11.jpg\"/></p>\n<h2>流派</h2>\n<p>蓄力硬钢流，上去莽就完事了</p>\n<h2>感悟</h2>\n<p>你们渴望成就大圣，\n而我，愿做平凡之人。</p>\n", "last_modified": 1725245117, "replies": 103, "id": 1069536}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1700771269", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1700771269", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 63990, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1700771269", "stars": 9075, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 17982, "username": "aboutboy", "url": "https://www.v2ex.com/u/aboutboy", "website": "http://lce.cc", "twitter": "", "psn": "", "github": "", "btc": "", "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/0c35/08c6/17982_mini.png?m=1521377817", "avatar_normal": "https://cdn.v2ex.com/avatar/0c35/08c6/17982_normal.png?m=1521377817", "avatar_large": "https://cdn.v2ex.com/avatar/0c35/08c6/17982_large.png?m=1521377817", "created": 1331523470, "last_modified": 1521377817}, "last_reply_by": "2owe", "last_touched": 1725264573, "title": "app 初始化时需要通过接口获取上千个独立的配置项，如何优化？", "url": "https://www.v2ex.com/t/1069523", "created": 1725244382, "deleted": 0, "content": "正在开发一个 app ，用户在使用 app 访问服务时，需要根据对应的服务从后端获取对应的配置文件（ json 格式）。\r\n\r\n一共有**上千个**独立的配置项。\r\n\r\n目前是当 app 第一次启动时，会首先通过接口查询配置项清单，然后再依次对各配置项进行请求获取。\r\n\r\n这样的问题是，**一个 app 就会向后端发起上千个请求**。而且可能需要十来分钟甚至更长时间才能把全部配置拉下来。\r\n\r\n这样一方面对后端服务器造成压力，另一方面影响用户体验。\r\n\r\n如果把配置全部打包在一起的话，大概**40-50MB**左右。\r\n\r\n有些配置项还会更新，这就需要**app 在后续的运行过程中对有更新的配置项进行更新**。\r\n\r\n## 请问大佬们有什么好的思路？", "content_rendered": "<p>正在开发一个 app ，用户在使用 app 访问服务时，需要根据对应的服务从后端获取对应的配置文件（ json 格式）。</p>\n<p>一共有<strong>上千个</strong>独立的配置项。</p>\n<p>目前是当 app 第一次启动时，会首先通过接口查询配置项清单，然后再依次对各配置项进行请求获取。</p>\n<p>这样的问题是，<strong>一个 app 就会向后端发起上千个请求</strong>。而且可能需要十来分钟甚至更长时间才能把全部配置拉下来。</p>\n<p>这样一方面对后端服务器造成压力，另一方面影响用户体验。</p>\n<p>如果把配置全部打包在一起的话，大概<strong>40-50MB</strong>左右。</p>\n<p>有些配置项还会更新，这就需要<strong>app 在后续的运行过程中对有更新的配置项进行更新</strong>。</p>\n<h2>请问大佬们有什么好的思路？</h2>\n", "last_modified": 1725244382, "replies": 87, "id": 1069523}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/4e73/2ced/26_large.png?m=1584288945", "name": "hangzhou", "avatar_normal": "https://cdn.v2ex.com/navatar/4e73/2ced/26_normal.png?m=1584288945", "title": "杭州", "url": "https://www.v2ex.com/go/hangzhou", "topics": 2228, "footer": "", "header": "", "title_alternative": "Hangzhou", "avatar_mini": "https://cdn.v2ex.com/navatar/4e73/2ced/26_mini.png?m=1584288945", "stars": 1709, "aliases": [], "root": false, "id": 26, "parent_node_name": "cn"}, "member": {"id": 237672, "username": "daiisdai", "url": "https://www.v2ex.com/u/daiisdai", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/3528/6d17/237672_mini.png?m=1716449043", "avatar_normal": "https://cdn.v2ex.com/avatar/3528/6d17/237672_normal.png?m=1716449043", "avatar_large": "https://cdn.v2ex.com/avatar/3528/6d17/237672_large.png?m=1716449043", "avatar_xlarge": "https://cdn.v2ex.com/avatar/3528/6d17/237672_xlarge.png?m=1716449043", "created": 1498651784, "last_modified": 1716449043}, "last_reply_by": "wxz5201314", "last_touched": 1725271385, "title": "杭州真是太热了，这天怎么受得了", "url": "https://www.v2ex.com/t/1069609", "created": 1725258367, "deleted": 0, "content": "杭州都 9 月还这么热吗？北京 8 月中旬都凉飕飕的了 \r\n\r\n刚来杭州直接被热懵逼了，夏天大家还能出门？ 想运动一下不得中暑了", "content_rendered": "<p>杭州都 9 月还这么热吗？北京 8 月中旬都凉飕飕的了 </p>\n<p>刚来杭州直接被热懵逼了，夏天大家还能出门？ 想运动一下不得中暑了</p>\n", "last_modified": 1725258367, "replies": 64, "id": 1069609}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1700771269", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1700771269", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 63990, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1700771269", "stars": 9075, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 5055, "username": "sdjl", "url": "https://www.v2ex.com/u/sdjl", "website": "", "twitter": "", "psn": "", "github": "", "btc": "", "location": "贵州安顺", "tagline": "微信云开发布道师，接小程序外包项目。", "bio": "专注微信小程序云开发，腾讯官方布道师，定期为腾讯公众号供稿，见帖子： \r\n https://www.v2ex.com/t/1065470\r\n\r\n注意，我直接定制开发，套模板和二次开发不做。\r\n\r\n小程序案例：“绘图助手”", "avatar_mini": "https://cdn.v2ex.com/avatar/be6a/d876/5055_mini.png?m=1724731250", "avatar_normal": "https://cdn.v2ex.com/avatar/be6a/d876/5055_normal.png?m=1724731250", "avatar_large": "https://cdn.v2ex.com/avatar/be6a/d876/5055_large.png?m=1724731250", "created": 1294652197, "last_modified": 1724731250}, "last_reply_by": "oamu", "last_touched": 1725263699, "title": "5 个前端 JS 函数，只为了优雅解决 a.b.c.d = 1 问题", "url": "https://www.v2ex.com/t/1069443", "created": 1725201621, "deleted": 0, "content": "## 前言\r\n\r\n最近更新了我的系列文章，其中有一部分是**关于 JavaScript 语言中“点表示法”的使用**。\r\n\r\n文章中有 5 个工具函数是纯`JavaScript`的，我觉得不仅仅是小程序项目用得上，**其他前端 JS 项目也应该用得上**。\r\n\r\n我把文章中的这一部分单独整理出来，**给需要写前端代码的朋友参考参考**。\r\n\r\n你可以直接在 [Github 项目]( https://github.com/sdjl/WxMpCloudBooster) 中的前端 `utils.js` 文件中找到这 5 个工具函数。\r\n\r\n下面是文章节选，完整的文章列表可以在 [Github 项目]( https://github.com/sdjl/WxMpCloudBooster) 中查看。\r\n\r\n## 点表示法`a.b.c`\r\n\r\n### 用点表示法给对象赋值：`putValue`函数\r\n\r\n想象一下，如果`a`是一个对象，你要给`a.b.c.d`赋值为 1 ，你会这样写？\r\n\r\n```javascript\r\nlet a // 通过某种方式获得的对象\r\nif (!a.b) {\r\n  a.b = {}\r\n}\r\nif (!a.b.c) {\r\n  a.b.c = {}\r\n}\r\na.b.c.d = 1\r\n```\r\n\r\n拜托，大学生才这样写。为此，我们引入了`putValue`函数：\r\n\r\n```javascript\r\nutils.putValue(a, 'b.c.d', 1)\r\n```\r\n\r\n`putValue`函数会自动创建`a.b`、`a.b.c`中间对象，它的声明如下：\r\n\r\n```javascript\r\n/**\r\n* 向对象中按照路径赋值，如果路径上的中间对象不存在，则自动创建。\r\n* @param {Object} obj - 目标对象。\r\n* @param {string} key - 属性路径，支持'a.b.c'形式。\r\n* @param {*} value - 要设置的值。\r\n* @param {Object} [options={}] - 可选参数。\r\n*   - {boolean} remove_undefined - 如果为 true 且 value 为 undefined ，则删除该属性。\r\n* @throws {Error} 如果 obj 为 null 或 undefined ，或路径不合法（如中间非对象）则抛出异常。\r\n*/\r\nputValue(obj, key, value, {remove_undefined = true} = {}){\r\n  // ...\r\n}\r\n```\r\n\r\n使用这个函数有两个地方要注意，一个是如果路径上的中间对象不是对象，会抛出异常。例如`a.b=2`，这里`b`不是对象，此时会抛出异常。\r\n\r\n另一个是如果`value`是`undefined`，则会删除该属性。例如下面的代码：\r\n\r\n```javascript\r\nutils.putValue(a, 'b.c.d', undefined)\r\nconsole.log(a) // {b: {c: {}}}，putValue 会自动创建中间对象，但不会自动删除空对象\r\n```\r\n\r\n但若你真想赋值为`undefined`，可设置`remove_undefined`参数为`false`。\r\n\r\n\r\n### 读取对象属性值：`pickValue`函数\r\n\r\n对应的，如果要获取`a.b.c.d`的值，可以使用`pickValue`函数：\r\n\r\n```javascript\r\nutils.putValue(a, 'b.c.d', 1)\r\nconst value = utils.pickValue(a, 'b.c.d')\r\nconsole.log(value) // 1\r\n```\r\n\r\n当然你也可以直接使用`javascript`的原生语法：\r\n\r\n```javascript\r\nconst value = a.b?.c?.d\r\n```\r\n\r\n这两种写法，当中间路径不存在时，均会返回`undefined`。\r\n\r\n但`a.b?.c?.d`这种写法是硬编码，而在实际开发中路径可能是动态的。例如用户要修改一个配置项，这个配置可能是`user_config.font.size`也可能是`user_config.page.color.background`，如果使用硬编码的方式，可能会写出这样的代码：\r\n\r\n```javascript\r\nif (key === 'font.size') {\r\n  user_config.font.size = value\r\n} else if (key === 'page.color.background') {\r\n  user_config.page.color.background = value\r\n}\r\n// 更多的 if 语句...\r\n```\r\n\r\n这样写显然不够优雅，看看`putValue`与`pickValue`的组合用法。\r\n\r\n\r\n```javascript\r\n// 写入用户配置：\r\nutils.putValue(user_config, key, value)\r\n\r\n// 读取用户配置\r\nconst value = utils.pickValue(user_config, key)\r\n```\r\n\r\n不管`key`怎么变，一句话搞定，感觉一下子和大学生拉开差距了是吧？\r\n\r\n\r\n### 向数组末尾添加元素：`pushValue`函数\r\n\r\n在实际开发中，常有向数组末尾添加数据的需求。例如记录用户最近的评论，此时你可以使用`pushValue`函数：\r\n\r\n```javascript\r\nconst user_data = {} // 用户数据\r\nlet comment = {content: '顶'} // 用户的评论\r\n\r\nutils.pushValue(user_data, `articles.recent_comments`, comment)\r\n\r\nconsole.log(user_data) // {articles: {recent_comments: [{content: '顶'}]}}\r\n```\r\n\r\n在上面代码中，`pushValue`函数先是自动创建了`user_data.articles.recent_comments`数组，然后把`comment`添加到数组末尾。`pushValue`函数的声明如下：\r\n\r\n```javascript\r\n/**\r\n * 将值推入对象指定路径的数组中，若路径或数组不存在则自动创建。\r\n * @param {Object} obj - 目标对象。\r\n * @param {string} key - 数组属性的路径，支持'a.b.c'形式。\r\n * @param {*} value - 要推入的值。\r\n * @throws {Error} 如果路径不是数组，则抛出异常。\r\n */\r\npushValue(obj, key, value){\r\n  // ...\r\n}\r\n```\r\n\r\n再次调用此函数，数组中就会有两个评论：\r\n\r\n```javascript\r\ncomment = {content: '再顶'}\r\n\r\nutils.pushValue(user_data, `articles.recent_comments`, comment)\r\n\r\nconsole.log(user_data) // {articles: {recent_comments: [{content: '顶'}, {content: '再顶'}]}}\r\n```\r\n\r\n### 向对象中添加多个属性：`putObj`函数\r\n\r\n前面我们使用`putValue`函数向`obj`对象写入了一个属性值，但如果你要写入很多个（例如 100 个）属性值，你可能会使用`for`循环：\r\n\r\n```javascript\r\nlet user_config = {}\r\nlet new_config_keys // 100 个新的配置项（数组）\r\nlet new_config_values // 对应的 100 个值（数组）\r\n\r\nfor (let i = 0; i < new_config_keys.length; i++) {\r\n  utils.putValue(user_config, new_config_keys[i], new_config_values[i])\r\n}\r\n```\r\n\r\n这样写没问题，但在实战中，你拿到的用户配置往往不是数组的形式，而很可能是一个对象，例如：\r\n\r\n```javascript\r\nlet new_config = {\r\n  font: {\r\n    size: 16,\r\n    'family.first': 'Arial',\r\n    'family.second': 'sans-serif',\r\n  },\r\n  'page.color.background': '#fff',\r\n  // ...\r\n}\r\n\r\n// 你对拿到的配置数据又进一步处理\r\nnew_config.update_time = new Date()\r\n```\r\n\r\n这种情况下你可以使用`putObj`函数一次性写入多个属性值：\r\n\r\n```javascript\r\nutils.putObj(user_config, new_config)\r\n\r\nconsole.log(user_config)\r\n\r\n/* 输出如下：\r\n{\r\n  font: {\r\n    size: 16,\r\n    family: {\r\n      first: 'Arial',\r\n      second: 'sans-serif'\r\n    }\r\n  },\r\n  page: {\r\n    color: {\r\n      background: '#fff'\r\n    }\r\n  },\r\n  update_time: '...',\r\n}\r\n*/\r\n```\r\n\r\n**注意`putObj`会自动处理上面`new_config`变量中各种路径的写法**。`putObj`函数的声明如下：\r\n\r\n```javascript\r\n/**\r\n * 将一个对象的所有属性按路径添加到另一个对象中。\r\n * @param {Object} obj - 目标对象。\r\n * @param {Object} obj_value - 要添加的属性对象，键支持'a.b.c'形式的路径。\r\n * @param {Object} [options={}] - 可选参数。\r\n *   - {boolean} remove_undefined - 如果为 true 且 value 为 undefined ，则删除该属性。\r\n * @throws {Error} 如果 obj 为 null 或 undefined ，或路径不合法（如中间非对象）则抛出异常。\r\n *\r\n * 注意\r\n *   若 obj_value 中出现重复路径，则后者会覆盖前者。\r\n *   如 obj_value = {a: {b: 1}, 'a.b': 2}，则结果为 {a: {b: 2}}\r\n */\r\nputObj(obj, obj_value, { remove_undefined = true} = {}) {\r\n  // ...\r\n}\r\n```\r\n\r\n### 从对象中获取多个属性：`pickObj`函数\r\n\r\n同样的，我们可以一次性读取多个对象的属性值。例如虽然小程序中的用户配置非常复杂，但当前页面仅关注背景颜色、字体大小等少量配置项，你可以这样使用`pickObj`函数：\r\n\r\n```javascript\r\nlet user_config // 某个用户的所有配置\r\n\r\n// 本页面需要关注的配置\r\nconst keys = ['page.color.background', 'font.size', 'font.family']\r\n\r\n// 获取当前页面需要的配置\r\nconst curr_config = utils.pickObj(user_config, keys)\r\n\r\nconsole.log(curr_config)\r\n\r\n/* 输出如下：\r\n{\r\n  'page.color.background': '#fff',\r\n  'font.size': 16,\r\n  'font.family': {\r\n    first: 'Arial',\r\n    second: 'sans-serif'\r\n  }\r\n}\r\n*/\r\n\r\nconsole.log(curr_config.font) // undefined\r\n```\r\n\r\n注意，传给`pickObj`函数的第二个参数是一个字符串数组，而不是对象。并且，`pickObj`返回的对象中，属性值不是以`curr_config.font.size`这样的形式返回，而是返回`curr_config['font.size']`。\r\n\r\n当然，如果你想要`curr_config.font.size`这样的形式，可用`putObj`转换一下：\r\n\r\n```javascript\r\nlet obj_config = utils.putObj({}, curr_config)\r\n\r\nconsole.log(obj_config.font.size) // 16\r\n```\r\n\r\n\r\n## 点表示法在微信小程序中实战演示\r\n\r\n为什么要设计这几个函数？为什么要支持`config.a.b.c`与`config['a.b.c']`两种写法混用？为什么传给`putObj`的第二个参数是对象，而传给`pickObj`的第二个参数是字符串数组？为什么`pickObj`返回的对象属性值不是`config.a.b.c`这样的形式，而是`config['a.b.c']`？\r\n\r\n因为这样设计符合实战需求，**一句话解释就是：“这样好用”**。\r\n\r\n下面我们通过几个案例来演示这些函数在实战中的应用。\r\n\r\n\r\n### 在 js 中设置用户配置\r\n\r\n假设用户首次打开小程序，你需要设置用户默认字体大小为 16 ，背景颜色为白色。可以这样写：\r\n\r\n```javascript\r\nlet user_config = {}\r\nutils.putValue(user_config, 'font.size', 16)\r\nutils.putValue(user_config, 'page.color.background', '#fff')\r\n```\r\n\r\n使用`putValue`设置后，你想修改字体大小和背景颜色？可以这样写：\r\n\r\n```javascript\r\nuser_config.font.size = 18\r\nuser_config.page.color.background = '#000'\r\n```\r\n\r\n### 在 wxml 中实现修改用户配置\r\n\r\n你可能会在 wxml 页面中实现多个配置项的修改，并且使用同一个函数来处理。这时你可以这样写：\r\n\r\n```html\r\n<button bind:tap=\"changeConfig\" data-key=\"font.size\" value=\"16\" >\r\n<button bind:tap=\"changeConfig\" data-key=\"page.color.background\" value=\"#fff\">\r\n```\r\n\r\n```javascript\r\nchangeConfig(e){\r\n  const { user_config } = this.data\r\n  const { key, value } = e.currentTarget.dataset\r\n\r\n  // 从 wxml 中获得点表示法的 key 字符串，直接调用 putValue 函数\r\n  utils.putValue(user_config, key, value)\r\n\r\n  // 修改背景色时顺便改一下字体颜色（两种写法混用）\r\n  if (key === 'page.color.background' && value === '#fff') {\r\n    user_config.page.color.font_color = '#000'\r\n  }\r\n\r\n  // 记录最近修改时间\r\n  user_config.update_time = new Date()\r\n}\r\n```\r\n\r\n### 在 wxml 中使用用户配置\r\n\r\n要在页面中使用`page.color.background`与`page.color.font_color`的值，实现根据用户配置显示不同的颜色，可以这样写：\r\n\r\n```html\r\n<view style=\"background-color: {{color.background}}\">\r\n  <text style=\"color: {{color.font_color}}\">\r\n      Hello, WxMpCloudBooster!\r\n  </text>\r\n</view>\r\n```\r\n\r\n```javascript\r\nonLoad(){\r\n  const { user_config } = this.data\r\n  const color = utils.pickValue(user_config, 'page.color')\r\n  this.setData({color})\r\n}\r\n```\r\n\r\n你看，我们传递给`pickValue`的`key`根据实际需求可长可短。\r\n\r\n\r\n### 初始化默认的用户配置\r\n\r\n你希望为每个用户设置一个默认的用户配置，并且你想用常规方式写（不使用点表示法）。可以这样：\r\n\r\n```javascript\r\n// 默认配置\r\nconst DEFAULT_CONFIG = {\r\n  font: {\r\n    size: 16,\r\n  },\r\n  page: {\r\n    color: {\r\n      background: '#fff',\r\n      font_color: '#000'\r\n    }\r\n  },\r\n  // 这里也可以使用点表示法 a.b.c ，但你不想这样写...\r\n}\r\n\r\nApp({\r\n  initConfig(){\r\n    let { user_config } = this.data\r\n    utils.putObj(user_config, DEFAULT_CONFIG) // user_config 的其他值会被保留\r\n    // 保存用户配置...\r\n  }\r\n})\r\n```\r\n\r\n注意，上面代码中`user_config`可能会有其他没有出现在`DEFAULT_CONFIG`中的配置项，这些配置项会被保留。\r\n\r\n\r\n### 记录用户最近发表的内容\r\n\r\n假如你已经实现了“记录用户最近发布的评论”功能，代码如下：\r\n\r\n```html\r\n<button bind:tap=\"append\" data-key=\"articles.recent_comments\" data-prop=\"comment\" >\r\n```\r\n\r\n当用户点击这个按钮时，假设`this.data`中已经有一个`comment`对象，你可以这样添加评论：\r\n\r\n```javascript\r\nappend(e){\r\n  const { user_data } = this.data\r\n  const { key, prop } = e.currentTarget.dataset\r\n  const value = this.data[prop] // prop === \"comment\"\r\n\r\n  utils.pushValue(user_data, key, value) // 注意这里用的是 push\r\n}\r\n```\r\n\r\n上面这个`append`函数会把`this.data.comment`对象添加到`user_data.articles.recent_comments`数组的末尾。\r\n\r\n然后，此时你希望再增加一个按钮，可以把最近的点赞数据`this.data.like`添加到`user_data.articles.recent_likes`数组的末尾，那么只需一句：\r\n\r\n```html\r\n<button bind:tap=\"append\" data-key=\"articles.recent_likes\" data-prop=\"like\" >\r\n```\r\n\r\n完成了，你不需要修改`append`函数，只需要给`data-key`和`data-prop`属性设置不同的值即可。\r\n\r\n可见，**点表示法很大的目的是为了在`wxml`中可以方便地指定路径，并在`js`中方便地处理这些路径。**\r\n\r\n\r\n### 在页面中修改多个配置项\r\n\r\n假设你有一个修改用户配置项的页面，`wxml`代码如下：\r\n\r\n```html\r\n<!-- 注意这里有一个 for 循环 -->\r\n<view wx:for=\"{{configs}}\">\r\n  配置名称：{{item.title}}\r\n  当前值：{{item.value}}\r\n  输入新值：<input type=\"text\" />\r\n  点击修改：<button bind:tap=\"changeConfig\"/>\r\n</view>\r\n```\r\n\r\n上面代码使用了`for`循环，`configs`变量中有多少个值，就会显示多少个配置项。\r\n\r\n为了实现在用户打开页面时显示的是用户的当前值（而不是默认值），你还需要从`user_config`中读取当前用户的配置值。\r\n\r\n代码样例如下：\r\n\r\n```javascript\r\n// 代码中写死了需要修改的配置项以及默认值\r\nconfigs = [\r\n  {title: '字体大小', key: 'font.size', value: 16},\r\n  {title: '背景颜色', key: 'page.color.background', value: '#fff'},\r\n  {title: '字体颜色', key: 'page.color.font_color', value: '#000'},\r\n]\r\n\r\n// 读取当前用户的配置值\r\nconst uc_obj = utils.pickObj(user_config, configs.map(item => item.key))\r\n\r\n// 注意，这里的 uc_obj 是 uc_obj['font.size'] 这样的形式，而不是 uc_obj.font.size\r\n\r\n// 用户当前值覆盖默认值\r\nconfigs.forEach(item => {\r\n  if (uc_obj[item.key] !== undefined) {\r\n    item.value = uc_obj[item.key]\r\n  }\r\n})\r\n\r\nthis.setData({configs}) // 传给 wxml 页面显示\r\n```\r\n\r\n这样你就实现了修改多个配置项的页面，用户打开页面时显示的是用户当前的配置值。\r\n\r\n*提问：假设我们坚决不使用点表示法，且要实现上面这些功能，你要如何设计才能如此简单、高效？*\r\n\r\n\r\n### 让你的函数也支持点表示法\r\n\r\n好了，目前我们花了不少篇幅介绍点表示法，这是因为**后面我们会介绍更多的工具函数，而这些工具函数都支持点表示法的调用方式**。\r\n\r\n当你编写自己的工具函数时，你可以调用`putValue`、`pickValue`、`pushValue`、`putObj`、`pickObj`这 5 个函数，**轻松地让你的工具函数也支持点表示法**。如果你不知道如何实现，可以参考`utils.js`中其他函数的代码。\r\n\r\n**（文章节选完，如果你感兴趣的话可以看看 [Github 项目]( https://github.com/sdjl/WxMpCloudBooster)）**", "content_rendered": "<h2>前言</h2>\n<p>最近更新了我的系列文章，其中有一部分是<strong>关于 JavaScript 语言中“点表示法”的使用</strong>。</p>\n<p>文章中有 5 个工具函数是纯<code>JavaScript</code>的，我觉得不仅仅是小程序项目用得上，<strong>其他前端 JS 项目也应该用得上</strong>。</p>\n<p>我把文章中的这一部分单独整理出来，<strong>给需要写前端代码的朋友参考参考</strong>。</p>\n<p>你可以直接在 <a href=\"https://github.com/sdjl/WxMpCloudBooster\" rel=\"nofollow\">Github 项目</a> 中的前端 <code>utils.js</code> 文件中找到这 5 个工具函数。</p>\n<p>下面是文章节选，完整的文章列表可以在 <a href=\"https://github.com/sdjl/WxMpCloudBooster\" rel=\"nofollow\">Github 项目</a> 中查看。</p>\n<h2>点表示法<code>a.b.c</code></h2>\n<h3>用点表示法给对象赋值：<code>putValue</code>函数</h3>\n<p>想象一下，如果<code>a</code>是一个对象，你要给<code>a.b.c.d</code>赋值为 1 ，你会这样写？</p>\n<pre><code class=\"language-javascript\">let a // 通过某种方式获得的对象\nif (!a.b) {\n  a.b = {}\n}\nif (!a.b.c) {\n  a.b.c = {}\n}\na.b.c.d = 1\n</code></pre>\n<p>拜托，大学生才这样写。为此，我们引入了<code>putValue</code>函数：</p>\n<pre><code class=\"language-javascript\">utils.putValue(a, 'b.c.d', 1)\n</code></pre>\n<p><code>putValue</code>函数会自动创建<code>a.b</code>、<code>a.b.c</code>中间对象，它的声明如下：</p>\n<pre><code class=\"language-javascript\">/**\n* 向对象中按照路径赋值，如果路径上的中间对象不存在，则自动创建。\n* @param {Object} obj - 目标对象。\n* @param {string} key - 属性路径，支持'a.b.c'形式。\n* @param {*} value - 要设置的值。\n* @param {Object} [options={}] - 可选参数。\n*   - {boolean} remove_undefined - 如果为 true 且 value 为 undefined ，则删除该属性。\n* @throws {Error} 如果 obj 为 null 或 undefined ，或路径不合法（如中间非对象）则抛出异常。\n*/\nputValue(obj, key, value, {remove_undefined = true} = {}){\n  // ...\n}\n</code></pre>\n<p>使用这个函数有两个地方要注意，一个是如果路径上的中间对象不是对象，会抛出异常。例如<code>a.b=2</code>，这里<code>b</code>不是对象，此时会抛出异常。</p>\n<p>另一个是如果<code>value</code>是<code>undefined</code>，则会删除该属性。例如下面的代码：</p>\n<pre><code class=\"language-javascript\">utils.putValue(a, 'b.c.d', undefined)\nconsole.log(a) // {b: {c: {}}}，putValue 会自动创建中间对象，但不会自动删除空对象\n</code></pre>\n<p>但若你真想赋值为<code>undefined</code>，可设置<code>remove_undefined</code>参数为<code>false</code>。</p>\n<h3>读取对象属性值：<code>pickValue</code>函数</h3>\n<p>对应的，如果要获取<code>a.b.c.d</code>的值，可以使用<code>pickValue</code>函数：</p>\n<pre><code class=\"language-javascript\">utils.putValue(a, 'b.c.d', 1)\nconst value = utils.pickValue(a, 'b.c.d')\nconsole.log(value) // 1\n</code></pre>\n<p>当然你也可以直接使用<code>javascript</code>的原生语法：</p>\n<pre><code class=\"language-javascript\">const value = a.b?.c?.d\n</code></pre>\n<p>这两种写法，当中间路径不存在时，均会返回<code>undefined</code>。</p>\n<p>但<code>a.b?.c?.d</code>这种写法是硬编码，而在实际开发中路径可能是动态的。例如用户要修改一个配置项，这个配置可能是<code>user_config.font.size</code>也可能是<code>user_config.page.color.background</code>，如果使用硬编码的方式，可能会写出这样的代码：</p>\n<pre><code class=\"language-javascript\">if (key === 'font.size') {\n  user_config.font.size = value\n} else if (key === 'page.color.background') {\n  user_config.page.color.background = value\n}\n// 更多的 if 语句...\n</code></pre>\n<p>这样写显然不够优雅，看看<code>putValue</code>与<code>pickValue</code>的组合用法。</p>\n<pre><code class=\"language-javascript\">// 写入用户配置：\nutils.putValue(user_config, key, value)\n\n// 读取用户配置\nconst value = utils.pickValue(user_config, key)\n</code></pre>\n<p>不管<code>key</code>怎么变，一句话搞定，感觉一下子和大学生拉开差距了是吧？</p>\n<h3>向数组末尾添加元素：<code>pushValue</code>函数</h3>\n<p>在实际开发中，常有向数组末尾添加数据的需求。例如记录用户最近的评论，此时你可以使用<code>pushValue</code>函数：</p>\n<pre><code class=\"language-javascript\">const user_data = {} // 用户数据\nlet comment = {content: '顶'} // 用户的评论\n\nutils.pushValue(user_data, `articles.recent_comments`, comment)\n\nconsole.log(user_data) // {articles: {recent_comments: [{content: '顶'}]}}\n</code></pre>\n<p>在上面代码中，<code>pushValue</code>函数先是自动创建了<code>user_data.articles.recent_comments</code>数组，然后把<code>comment</code>添加到数组末尾。<code>pushValue</code>函数的声明如下：</p>\n<pre><code class=\"language-javascript\">/**\n * 将值推入对象指定路径的数组中，若路径或数组不存在则自动创建。\n * @param {Object} obj - 目标对象。\n * @param {string} key - 数组属性的路径，支持'a.b.c'形式。\n * @param {*} value - 要推入的值。\n * @throws {Error} 如果路径不是数组，则抛出异常。\n */\npushValue(obj, key, value){\n  // ...\n}\n</code></pre>\n<p>再次调用此函数，数组中就会有两个评论：</p>\n<pre><code class=\"language-javascript\">comment = {content: '再顶'}\n\nutils.pushValue(user_data, `articles.recent_comments`, comment)\n\nconsole.log(user_data) // {articles: {recent_comments: [{content: '顶'}, {content: '再顶'}]}}\n</code></pre>\n<h3>向对象中添加多个属性：<code>putObj</code>函数</h3>\n<p>前面我们使用<code>putValue</code>函数向<code>obj</code>对象写入了一个属性值，但如果你要写入很多个（例如 100 个）属性值，你可能会使用<code>for</code>循环：</p>\n<pre><code class=\"language-javascript\">let user_config = {}\nlet new_config_keys // 100 个新的配置项（数组）\nlet new_config_values // 对应的 100 个值（数组）\n\nfor (let i = 0; i &lt; new_config_keys.length; i++) {\n  utils.putValue(user_config, new_config_keys[i], new_config_values[i])\n}\n</code></pre>\n<p>这样写没问题，但在实战中，你拿到的用户配置往往不是数组的形式，而很可能是一个对象，例如：</p>\n<pre><code class=\"language-javascript\">let new_config = {\n  font: {\n    size: 16,\n    'family.first': 'Arial',\n    'family.second': 'sans-serif',\n  },\n  'page.color.background': '#fff',\n  // ...\n}\n\n// 你对拿到的配置数据又进一步处理\nnew_config.update_time = new Date()\n</code></pre>\n<p>这种情况下你可以使用<code>putObj</code>函数一次性写入多个属性值：</p>\n<pre><code class=\"language-javascript\">utils.putObj(user_config, new_config)\n\nconsole.log(user_config)\n\n/* 输出如下：\n{\n  font: {\n    size: 16,\n    family: {\n      first: 'Arial',\n      second: 'sans-serif'\n    }\n  },\n  page: {\n    color: {\n      background: '#fff'\n    }\n  },\n  update_time: '...',\n}\n*/\n</code></pre>\n<p><strong>注意<code>putObj</code>会自动处理上面<code>new_config</code>变量中各种路径的写法</strong>。<code>putObj</code>函数的声明如下：</p>\n<pre><code class=\"language-javascript\">/**\n * 将一个对象的所有属性按路径添加到另一个对象中。\n * @param {Object} obj - 目标对象。\n * @param {Object} obj_value - 要添加的属性对象，键支持'a.b.c'形式的路径。\n * @param {Object} [options={}] - 可选参数。\n *   - {boolean} remove_undefined - 如果为 true 且 value 为 undefined ，则删除该属性。\n * @throws {Error} 如果 obj 为 null 或 undefined ，或路径不合法（如中间非对象）则抛出异常。\n *\n * 注意\n *   若 obj_value 中出现重复路径，则后者会覆盖前者。\n *   如 obj_value = {a: {b: 1}, 'a.b': 2}，则结果为 {a: {b: 2}}\n */\nputObj(obj, obj_value, { remove_undefined = true} = {}) {\n  // ...\n}\n</code></pre>\n<h3>从对象中获取多个属性：<code>pickObj</code>函数</h3>\n<p>同样的，我们可以一次性读取多个对象的属性值。例如虽然小程序中的用户配置非常复杂，但当前页面仅关注背景颜色、字体大小等少量配置项，你可以这样使用<code>pickObj</code>函数：</p>\n<pre><code class=\"language-javascript\">let user_config // 某个用户的所有配置\n\n// 本页面需要关注的配置\nconst keys = ['page.color.background', 'font.size', 'font.family']\n\n// 获取当前页面需要的配置\nconst curr_config = utils.pickObj(user_config, keys)\n\nconsole.log(curr_config)\n\n/* 输出如下：\n{\n  'page.color.background': '#fff',\n  'font.size': 16,\n  'font.family': {\n    first: 'Arial',\n    second: 'sans-serif'\n  }\n}\n*/\n\nconsole.log(curr_config.font) // undefined\n</code></pre>\n<p>注意，传给<code>pickObj</code>函数的第二个参数是一个字符串数组，而不是对象。并且，<code>pickObj</code>返回的对象中，属性值不是以<code>curr_config.font.size</code>这样的形式返回，而是返回<code>curr_config['font.size']</code>。</p>\n<p>当然，如果你想要<code>curr_config.font.size</code>这样的形式，可用<code>putObj</code>转换一下：</p>\n<pre><code class=\"language-javascript\">let obj_config = utils.putObj({}, curr_config)\n\nconsole.log(obj_config.font.size) // 16\n</code></pre>\n<h2>点表示法在微信小程序中实战演示</h2>\n<p>为什么要设计这几个函数？为什么要支持<code>config.a.b.c</code>与<code>config['a.b.c']</code>两种写法混用？为什么传给<code>putObj</code>的第二个参数是对象，而传给<code>pickObj</code>的第二个参数是字符串数组？为什么<code>pickObj</code>返回的对象属性值不是<code>config.a.b.c</code>这样的形式，而是<code>config['a.b.c']</code>？</p>\n<p>因为这样设计符合实战需求，<strong>一句话解释就是：“这样好用”</strong>。</p>\n<p>下面我们通过几个案例来演示这些函数在实战中的应用。</p>\n<h3>在 js 中设置用户配置</h3>\n<p>假设用户首次打开小程序，你需要设置用户默认字体大小为 16 ，背景颜色为白色。可以这样写：</p>\n<pre><code class=\"language-javascript\">let user_config = {}\nutils.putValue(user_config, 'font.size', 16)\nutils.putValue(user_config, 'page.color.background', '#fff')\n</code></pre>\n<p>使用<code>putValue</code>设置后，你想修改字体大小和背景颜色？可以这样写：</p>\n<pre><code class=\"language-javascript\">user_config.font.size = 18\nuser_config.page.color.background = '#000'\n</code></pre>\n<h3>在 wxml 中实现修改用户配置</h3>\n<p>你可能会在 wxml 页面中实现多个配置项的修改，并且使用同一个函数来处理。这时你可以这样写：</p>\n<pre><code class=\"language-html\">&lt;button bind:tap=\"changeConfig\" data-key=\"font.size\" value=\"16\" &gt;\n&lt;button bind:tap=\"changeConfig\" data-key=\"page.color.background\" value=\"#fff\"&gt;\n</code></pre>\n<pre><code class=\"language-javascript\">changeConfig(e){\n  const { user_config } = this.data\n  const { key, value } = e.currentTarget.dataset\n\n  // 从 wxml 中获得点表示法的 key 字符串，直接调用 putValue 函数\n  utils.putValue(user_config, key, value)\n\n  // 修改背景色时顺便改一下字体颜色（两种写法混用）\n  if (key === 'page.color.background' &amp;&amp; value === '#fff') {\n    user_config.page.color.font_color = '#000'\n  }\n\n  // 记录最近修改时间\n  user_config.update_time = new Date()\n}\n</code></pre>\n<h3>在 wxml 中使用用户配置</h3>\n<p>要在页面中使用<code>page.color.background</code>与<code>page.color.font_color</code>的值，实现根据用户配置显示不同的颜色，可以这样写：</p>\n<pre><code class=\"language-html\">&lt;view style=\"background-color: {{color.background}}\"&gt;\n  &lt;text style=\"color: {{color.font_color}}\"&gt;\n      Hello, WxMpCloudBooster!\n  &lt;/text&gt;\n&lt;/view&gt;\n</code></pre>\n<pre><code class=\"language-javascript\">onLoad(){\n  const { user_config } = this.data\n  const color = utils.pickValue(user_config, 'page.color')\n  this.setData({color})\n}\n</code></pre>\n<p>你看，我们传递给<code>pickValue</code>的<code>key</code>根据实际需求可长可短。</p>\n<h3>初始化默认的用户配置</h3>\n<p>你希望为每个用户设置一个默认的用户配置，并且你想用常规方式写（不使用点表示法）。可以这样：</p>\n<pre><code class=\"language-javascript\">// 默认配置\nconst DEFAULT_CONFIG = {\n  font: {\n    size: 16,\n  },\n  page: {\n    color: {\n      background: '#fff',\n      font_color: '#000'\n    }\n  },\n  // 这里也可以使用点表示法 a.b.c ，但你不想这样写...\n}\n\nApp({\n  initConfig(){\n    let { user_config } = this.data\n    utils.putObj(user_config, DEFAULT_CONFIG) // user_config 的其他值会被保留\n    // 保存用户配置...\n  }\n})\n</code></pre>\n<p>注意，上面代码中<code>user_config</code>可能会有其他没有出现在<code>DEFAULT_CONFIG</code>中的配置项，这些配置项会被保留。</p>\n<h3>记录用户最近发表的内容</h3>\n<p>假如你已经实现了“记录用户最近发布的评论”功能，代码如下：</p>\n<pre><code class=\"language-html\">&lt;button bind:tap=\"append\" data-key=\"articles.recent_comments\" data-prop=\"comment\" &gt;\n</code></pre>\n<p>当用户点击这个按钮时，假设<code>this.data</code>中已经有一个<code>comment</code>对象，你可以这样添加评论：</p>\n<pre><code class=\"language-javascript\">append(e){\n  const { user_data } = this.data\n  const { key, prop } = e.currentTarget.dataset\n  const value = this.data[prop] // prop === \"comment\"\n\n  utils.pushValue(user_data, key, value) // 注意这里用的是 push\n}\n</code></pre>\n<p>上面这个<code>append</code>函数会把<code>this.data.comment</code>对象添加到<code>user_data.articles.recent_comments</code>数组的末尾。</p>\n<p>然后，此时你希望再增加一个按钮，可以把最近的点赞数据<code>this.data.like</code>添加到<code>user_data.articles.recent_likes</code>数组的末尾，那么只需一句：</p>\n<pre><code class=\"language-html\">&lt;button bind:tap=\"append\" data-key=\"articles.recent_likes\" data-prop=\"like\" &gt;\n</code></pre>\n<p>完成了，你不需要修改<code>append</code>函数，只需要给<code>data-key</code>和<code>data-prop</code>属性设置不同的值即可。</p>\n<p>可见，<strong>点表示法很大的目的是为了在<code>wxml</code>中可以方便地指定路径，并在<code>js</code>中方便地处理这些路径。</strong></p>\n<h3>在页面中修改多个配置项</h3>\n<p>假设你有一个修改用户配置项的页面，<code>wxml</code>代码如下：</p>\n<pre><code class=\"language-html\">&lt;!-- 注意这里有一个 for 循环 --&gt;\n&lt;view wx:for=\"{{configs}}\"&gt;\n  配置名称：{{item.title}}\n  当前值：{{item.value}}\n  输入新值：&lt;input type=\"text\" /&gt;\n  点击修改：&lt;button bind:tap=\"changeConfig\"/&gt;\n&lt;/view&gt;\n</code></pre>\n<p>上面代码使用了<code>for</code>循环，<code>configs</code>变量中有多少个值，就会显示多少个配置项。</p>\n<p>为了实现在用户打开页面时显示的是用户的当前值（而不是默认值），你还需要从<code>user_config</code>中读取当前用户的配置值。</p>\n<p>代码样例如下：</p>\n<pre><code class=\"language-javascript\">// 代码中写死了需要修改的配置项以及默认值\nconfigs = [\n  {title: '字体大小', key: 'font.size', value: 16},\n  {title: '背景颜色', key: 'page.color.background', value: '#fff'},\n  {title: '字体颜色', key: 'page.color.font_color', value: '#000'},\n]\n\n// 读取当前用户的配置值\nconst uc_obj = utils.pickObj(user_config, configs.map(item =&gt; item.key))\n\n// 注意，这里的 uc_obj 是 uc_obj['font.size'] 这样的形式，而不是 uc_obj.font.size\n\n// 用户当前值覆盖默认值\nconfigs.forEach(item =&gt; {\n  if (uc_obj[item.key] !== undefined) {\n    item.value = uc_obj[item.key]\n  }\n})\n\nthis.setData({configs}) // 传给 wxml 页面显示\n</code></pre>\n<p>这样你就实现了修改多个配置项的页面，用户打开页面时显示的是用户当前的配置值。</p>\n<p><em>提问：假设我们坚决不使用点表示法，且要实现上面这些功能，你要如何设计才能如此简单、高效？</em></p>\n<h3>让你的函数也支持点表示法</h3>\n<p>好了，目前我们花了不少篇幅介绍点表示法，这是因为<strong>后面我们会介绍更多的工具函数，而这些工具函数都支持点表示法的调用方式</strong>。</p>\n<p>当你编写自己的工具函数时，你可以调用<code>putValue</code>、<code>pickValue</code>、<code>pushValue</code>、<code>putObj</code>、<code>pickObj</code>这 5 个函数，<strong>轻松地让你的工具函数也支持点表示法</strong>。如果你不知道如何实现，可以参考<code>utils.js</code>中其他函数的代码。</p>\n<p><strong>（文章节选完，如果你感兴趣的话可以看看 <a href=\"https://github.com/sdjl/WxMpCloudBooster\" rel=\"nofollow\">Github 项目</a>）</strong></p>\n", "last_modified": 1725202177, "replies": 64, "id": 1069443}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6cdd/60ea/184_large.png?m=1630643913", "name": "apple", "avatar_normal": "https://cdn.v2ex.com/navatar/6cdd/60ea/184_normal.png?m=1630643913", "title": "Apple", "url": "https://www.v2ex.com/go/apple", "topics": 26283, "footer": "", "header": "设计了 <a href=\"/go/watch\">Apple Watch</a>，<a href=\"/go/ipad\">iPad</a>，<a href=\"/go/iphone\">iPhone</a>，<a href=\"/go/imac\">iMac</a> 及 <a href=\"/go/mbp\">MacBook Pro</a> 等电子产品的美国公司。", "title_alternative": "Apple", "avatar_mini": "https://cdn.v2ex.com/navatar/6cdd/60ea/184_mini.png?m=1630643913", "stars": 3004, "aliases": [], "root": false, "id": 184, "parent_node_name": "hardware"}, "member": {"id": 544221, "username": "flytsuki", "url": "https://www.v2ex.com/u/flytsuki", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/9d1d22d166f91f2e567191345bc6076d?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/9d1d22d166f91f2e567191345bc6076d?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/9d1d22d166f91f2e567191345bc6076d?s=73&d=retro", "created": 1619773237, "last_modified": 1725239577}, "last_reply_by": "Arizas", "last_touched": 1725267956, "title": "广州政府补贴七千一拿下 MBA m2 16+256 亏不亏", "url": "https://www.v2ex.com/t/1069482", "created": 1725239626, "deleted": 0, "content": "24 期无息每月不到 300 。新品啥时候发布算不算 49 年入国军。。。", "content_rendered": "<p>24 期无息每月不到 300 。新品啥时候发布算不算 49 年入国军。。。</p>\n", "last_modified": 1725239626, "replies": 54, "id": 1069482}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/a9b7/ba70/1000_large.png?m=1505002606", "name": "smarthome", "avatar_normal": "https://cdn.v2ex.com/navatar/a9b7/ba70/1000_normal.png?m=1505002606", "title": "智能家电", "url": "https://www.v2ex.com/go/smarthome", "topics": 200, "footer": "", "header": "让一切家电都连上 Wi-Fi 吧", "title_alternative": "Smart Home", "avatar_mini": "https://cdn.v2ex.com/navatar/a9b7/ba70/1000_mini.png?m=1505002606", "stars": 170, "aliases": [], "root": false, "id": 1000, "parent_node_name": "geek"}, "member": {"id": 472376, "username": "Jinnrry", "url": "https://www.v2ex.com/u/Jinnrry", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/f759ce4a1c2d8c5530deeee4203a1575?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/f759ce4a1c2d8c5530deeee4203a1575?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/f759ce4a1c2d8c5530deeee4203a1575?s=73&d=retro", "created": 1582679724, "last_modified": 1717483507}, "last_reply_by": "jadehare", "last_touched": 1725270428, "title": "小米智能家居的控制，全部走无线，真稳定吗？", "url": "https://www.v2ex.com/t/1069561", "created": 1725248187, "deleted": 0, "content": "家里装修，全屋都是小米的智能控制方案。但是安装的时候我傻眼了，家里面几十个开关，外加新风、地暖、空调，全部走蓝牙通信。墙里面所有开关线直接短接，然后通过开关线给智能开关供电，智能开关通过蓝牙控制对应设备。\r\n\r\n配置完成后，米家 app 里面加了上千个“自动化”脚本，类似这样“温控按钮调整 27 度->空调设置为 27 度”，每个温度都设置一个自动化。\r\n\r\n看完师傅的接线和设置，我是对这玩意稳定性十分怀疑，这特么万一蓝牙网关挂了，或者蓝牙信号受干扰啥的了，那不是全屋所有开关全挂了，连个灯都打不开了？\r\n\r\n按照我的理解，这特么纯粹师傅偷懒，墙里面空调、地暖、新风、灯，所有设备都是埋了线的，为毛要全短接走无线啊，纯粹是为了他省事懒得接。\r\n\r\n有没有全屋米家智能的兄弟，分享下？\r\n\r\n家里两层楼，楼上放一个蓝牙网关，楼下放一个多模网关，墙上开关这类设备走蓝牙协议、大件电器、摄像头这类设备走 wifi", "content_rendered": "<p>家里装修，全屋都是小米的智能控制方案。但是安装的时候我傻眼了，家里面几十个开关，外加新风、地暖、空调，全部走蓝牙通信。墙里面所有开关线直接短接，然后通过开关线给智能开关供电，智能开关通过蓝牙控制对应设备。</p>\n<p>配置完成后，米家 app 里面加了上千个“自动化”脚本，类似这样“温控按钮调整 27 度-&gt;空调设置为 27 度”，每个温度都设置一个自动化。</p>\n<p>看完师傅的接线和设置，我是对这玩意稳定性十分怀疑，这特么万一蓝牙网关挂了，或者蓝牙信号受干扰啥的了，那不是全屋所有开关全挂了，连个灯都打不开了？</p>\n<p>按照我的理解，这特么纯粹师傅偷懒，墙里面空调、地暖、新风、灯，所有设备都是埋了线的，为毛要全短接走无线啊，纯粹是为了他省事懒得接。</p>\n<p>有没有全屋米家智能的兄弟，分享下？</p>\n<p>家里两层楼，楼上放一个蓝牙网关，楼下放一个多模网关，墙上开关这类设备走蓝牙协议、大件电器、摄像头这类设备走 wifi</p>\n", "last_modified": 1725248187, "replies": 50, "id": 1069561}]