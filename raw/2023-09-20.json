[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6e27/13a6/557_large.png?m=1608969785", "name": "life", "avatar_normal": "https://cdn.v2ex.com/navatar/6e27/13a6/557_normal.png?m=1608969785", "title": "生活", "url": "https://www.v2ex.com/go/life", "topics": 4844, "footer": "", "header": "生活中的技术讨论", "title_alternative": "Life", "avatar_mini": "https://cdn.v2ex.com/navatar/6e27/13a6/557_mini.png?m=1608969785", "stars": 1193, "aliases": [], "root": false, "id": 557, "parent_node_name": ""}, "member": {"id": 594200, "username": "merlinliu1", "url": "https://www.v2ex.com/u/merlinliu1", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/e25964d848811ac00979c8248fc37c43?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/e25964d848811ac00979c8248fc37c43?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/e25964d848811ac00979c8248fc37c43?s=73&d=retro", "created": 1663060154, "last_modified": 1663060154}, "last_reply_by": "cuicuiv5", "last_touched": 1695189444, "title": "收集一波大家认为能提升生活幸福感的东西，一切东西", "url": "https://www.v2ex.com/t/975182", "created": 1695105049, "deleted": 0, "content": "大到洗碗机、扫地机器人，小到置物架、沐浴露、智能灯泡、遥控器等，统统收集，希望提升自己幸福感的同时，也能让大家互相做参考", "content_rendered": "<p>大到洗碗机、扫地机器人，小到置物架、沐浴露、智能灯泡、遥控器等，统统收集，希望提升自己幸福感的同时，也能让大家互相做参考</p>\n", "last_modified": 1695105096, "replies": 236, "id": 975182}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/f61d/6947/375_large.png?m=1658910399", "name": "go", "avatar_normal": "https://cdn.v2ex.com/navatar/f61d/6947/375_normal.png?m=1658910399", "title": "Go 编程语言", "url": "https://www.v2ex.com/go/go", "topics": 2782, "footer": "", "header": "Go 是一个开源的编程语言，它能让构造简单、可靠且高效的软件变得容易。", "title_alternative": "The Go Programming Language", "avatar_mini": "https://cdn.v2ex.com/navatar/f61d/6947/375_mini.png?m=1658910399", "stars": 3686, "aliases": [], "root": false, "id": 375, "parent_node_name": "programming"}, "member": {"id": 266237, "username": "BeautifulSoap", "url": "https://www.v2ex.com/u/BeautifulSoap", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/1e0f/48e8/266237_mini.png?m=1691995638", "avatar_normal": "https://cdn.v2ex.com/avatar/1e0f/48e8/266237_normal.png?m=1691995638", "avatar_large": "https://cdn.v2ex.com/avatar/1e0f/48e8/266237_large.png?m=1691995638", "avatar_xlarge": "https://cdn.v2ex.com/avatar/1e0f/48e8/266237_xlarge.png?m=1691995638", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/1e0f/48e8/266237_xlarge.png?m=1691995638", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/1e0f/48e8/266237_xlarge.png?m=1691995638", "created": 1510298723, "last_modified": 1691995638}, "last_reply_by": "pkoukk", "last_touched": 1695189893, "title": "踩到 Go 的 json 解析坑了，如何才能严格解析 json？", "url": "https://www.v2ex.com/t/975214", "created": 1695108481, "deleted": 0, "content": "精准踩中了 json 解析包的两个坑导致了生产环境出错\r\n\r\n假设有下面结构体定义\r\n```go\r\ntype Data struct {\r\n\tA   string `json:\"a\"`\r\n\tB   int   `json:\"b`\r\n\tObj struct {\r\n\t\tAA string `json:\"aa\"`\r\n\t\tBB int    `json:\"bb\"`\r\n\t} `json:\"obj\"`\r\n}\r\n```\r\n\r\n使用`json.Unmarshal()` 解析下列几种 json\r\n```json\r\n{\"a\":null, \"b\": null, \"obj\":null}\r\n{\"obj\": null}\r\n{\"a\": \"a\"}\r\n{\"a\": \"a\",\"z\":\"z\"}\r\n{}\r\n{\"obj\": {}}\r\n```\r\n\r\n问：解析哪个 json 会报错？\r\n\r\n答：全都不报错都正确解析\r\n\r\n都是不出事就注意不到的问题。尤其非指针类型字段，我下意识认为遇到 null 是会直接报错的，结果直接是当作不存在(undefined)来处理。。。\r\n\r\nso ，go 下怎么才能简单地进行严格 json 解析？要求\r\n1. 不允许出现未知字段，出现则报错（这个似乎倒是可以用 json 包的 DisallowUnknownFields 简单做到）\r\n2. 非指针字段不允许传入 null ，否则报错（似乎 json 包没法简单做到）", "content_rendered": "<p>精准踩中了 json 解析包的两个坑导致了生产环境出错</p>\n<p>假设有下面结构体定义</p>\n<pre><code class=\"language-go\">type Data struct {\n\tA   string `json:\"a\"`\n\tB   int   `json:\"b`\n\tObj struct {\n\t\tAA string `json:\"aa\"`\n\t\tBB int    `json:\"bb\"`\n\t} `json:\"obj\"`\n}\n</code></pre>\n<p>使用<code>json.Unmarshal()</code> 解析下列几种 json</p>\n<pre><code class=\"language-json\">{\"a\":null, \"b\": null, \"obj\":null}\n{\"obj\": null}\n{\"a\": \"a\"}\n{\"a\": \"a\",\"z\":\"z\"}\n{}\n{\"obj\": {}}\n</code></pre>\n<p>问：解析哪个 json 会报错？</p>\n<p>答：全都不报错都正确解析</p>\n<p>都是不出事就注意不到的问题。尤其非指针类型字段，我下意识认为遇到 null 是会直接报错的，结果直接是当作不存在(undefined)来处理。。。</p>\n<p>so ，go 下怎么才能简单地进行严格 json 解析？要求</p>\n<ol>\n<li>不允许出现未知字段，出现则报错（这个似乎倒是可以用 json 包的 DisallowUnknownFields 简单做到）</li>\n<li>非指针字段不允许传入 null ，否则报错（似乎 json 包没法简单做到）</li>\n</ol>\n", "last_modified": 1695123142, "replies": 138, "id": 975214}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 211078, "footer": "", "header": "一个更好的世界需要你持续地提出好问题。", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340", "stars": 3946, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 366740, "username": "6379616e", "url": "https://www.v2ex.com/u/6379616e", "website": "chat.0x403.com", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/bd79/52af/366740_mini.png?m=1695115966", "avatar_normal": "https://cdn.v2ex.com/avatar/bd79/52af/366740_normal.png?m=1695115966", "avatar_large": "https://cdn.v2ex.com/avatar/bd79/52af/366740_large.png?m=1695115966", "avatar_xlarge": "https://cdn.v2ex.com/avatar/bd79/52af/366740_xlarge.png?m=1695115966", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/bd79/52af/366740_xlarge.png?m=1695115966", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/bd79/52af/366740_xlarge.png?m=1695115966", "created": 1543496639, "last_modified": 1695115966}, "last_reply_by": "sudasheng2624", "last_touched": 1695189361, "title": "想问下大家平时在高速上速度开到多少？", "url": "https://www.v2ex.com/t/975258", "created": 1695114104, "deleted": 0, "content": "想问下大家平时在高速上速度开到多少，女朋友总是抱怨我车技不行说我开的慢，我加速又说我开的不稳，只知道猛踩油门然后又急踩刹车，坐着不舒服，不像别人又快又稳。我就怼她谁车坐的舒服你去找她，然后她就生气不说话了；我想问问，我高速开 130-140 左右算慢吗，我都超了好几辆车了", "content_rendered": "<p>想问下大家平时在高速上速度开到多少，女朋友总是抱怨我车技不行说我开的慢，我加速又说我开的不稳，只知道猛踩油门然后又急踩刹车，坐着不舒服，不像别人又快又稳。我就怼她谁车坐的舒服你去找她，然后她就生气不说话了；我想问问，我高速开 130-140 左右算慢吗，我都超了好几辆车了</p>\n", "last_modified": 1695114104, "replies": 103, "id": 975258}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1692078075", "name": "programmer", "avatar_normal": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1692078075", "title": "程序员", "url": "https://www.v2ex.com/go/programmer", "topics": 58999, "footer": "", "header": "While code monkeys are not eating bananas, they're coding.", "title_alternative": "Programmer", "avatar_mini": "https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1692078075", "stars": 8593, "aliases": [], "root": false, "id": 300, "parent_node_name": "computer"}, "member": {"id": 374158, "username": "v2nika", "url": "https://www.v2ex.com/u/v2nika", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/3ab1d28e01d47eb940fcda47b7aa1405?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/3ab1d28e01d47eb940fcda47b7aa1405?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/3ab1d28e01d47eb940fcda47b7aa1405?s=73&d=retro", "created": 1546168418, "last_modified": 1695020816}, "last_reply_by": "rivercherdeeeeee", "last_touched": 1695189835, "title": "为什么这么多后端开发上下游不分?", "url": "https://www.v2ex.com/t/975243", "created": 1695112192, "deleted": 0, "content": "面试了不少于 100 个后端工程师, 初级到高级都有. 有相当一部分 (>70%) 的人, 都会说我做的服务调用下游服务如何如何.\r\n\r\n为什么会这样? 只要认真思考一下, downstream 和 upstream 的概念不至于记不住吧?", "content_rendered": "<p>面试了不少于 100 个后端工程师, 初级到高级都有. 有相当一部分 (&gt;70%) 的人, 都会说我做的服务调用下游服务如何如何.</p>\n<p>为什么会这样? 只要认真思考一下, downstream 和 upstream 的概念不至于记不住吧?</p>\n", "last_modified": 1695112192, "replies": 93, "id": 975243}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/6cdd/60ea/184_large.png?m=1630643913", "name": "apple", "avatar_normal": "https://cdn.v2ex.com/navatar/6cdd/60ea/184_normal.png?m=1630643913", "title": "Apple", "url": "https://www.v2ex.com/go/apple", "topics": 23532, "footer": "", "header": "设计了 <a href=\"/go/watch\">Apple Watch</a>，<a href=\"/go/ipad\">iPad</a>，<a href=\"/go/iphone\">iPhone</a>，<a href=\"/go/imac\">iMac</a> 及 <a href=\"/go/mbp\">MacBook Pro</a> 等电子产品的美国公司。", "title_alternative": "Apple", "avatar_mini": "https://cdn.v2ex.com/navatar/6cdd/60ea/184_mini.png?m=1630643913", "stars": 2703, "aliases": [], "root": false, "id": 184, "parent_node_name": "hardware"}, "member": {"id": 36810, "username": "czhu", "url": "https://www.v2ex.com/u/czhu", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/c4bb/c69c/36810_mini.png?m=1654541837", "avatar_normal": "https://cdn.v2ex.com/avatar/c4bb/c69c/36810_normal.png?m=1654541837", "avatar_large": "https://cdn.v2ex.com/avatar/c4bb/c69c/36810_large.png?m=1654541837", "created": 1364593184, "last_modified": 1654541837}, "last_reply_by": "yvescheung", "last_touched": 1695189435, "title": "老生常谈-讨论苹果生态下科学上网最佳 App", "url": "https://www.v2ex.com/t/975377", "created": 1695153206, "deleted": 0, "content": "突然发现 Quantumult X 适配了 macOS ，有谁用了吗，谈谈体会？\r\n\r\n主要候选的有\r\n\r\n1. 小火箭 [Shadowrocket]( https://apps.apple.com/ca/app/shadowrocket/id932747118)\r\n2. [Quantumult X]( https://apps.apple.com/us/app/quantumult-x/id1443988620)\r\n3. [Loon]( https://apps.apple.com/us/app/loon/id1373567447)\r\n4. [Stash]( https://apps.apple.com/us/app/stash-rule-based-proxy/id1596063349)\r\n5. [Surge]( https://apps.apple.com/us/app/surge-5/id1442620678)\r\n\r\n2-5 刚刚适配了 Apple TV 。1 一直用，界面简单，还没适配 Apple TV 和 macOS 。\r\n5 太贵了，Mac 和 iOS 还要分开买，不考虑。\r\n\r\n大家都用啥？有啥推荐", "content_rendered": "<p>突然发现 Quantumult X 适配了 macOS ，有谁用了吗，谈谈体会？</p>\n<p>主要候选的有</p>\n<ol>\n<li>小火箭 <a href=\"https://apps.apple.com/ca/app/shadowrocket/id932747118\" rel=\"nofollow\">Shadowrocket</a></li>\n<li><a href=\"https://apps.apple.com/us/app/quantumult-x/id1443988620\" rel=\"nofollow\">Quantumult X</a></li>\n<li><a href=\"https://apps.apple.com/us/app/loon/id1373567447\" rel=\"nofollow\">Loon</a></li>\n<li><a href=\"https://apps.apple.com/us/app/stash-rule-based-proxy/id1596063349\" rel=\"nofollow\">Stash</a></li>\n<li><a href=\"https://apps.apple.com/us/app/surge-5/id1442620678\" rel=\"nofollow\">Surge</a></li>\n</ol>\n<p>2-5 刚刚适配了 Apple TV 。1 一直用，界面简单，还没适配 Apple TV 和 macOS 。\n5 太贵了，Mac 和 iOS 还要分开买，不考虑。</p>\n<p>大家都用啥？有啥推荐</p>\n", "last_modified": 1695153534, "replies": 79, "id": 975377}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c9f0/f895/8_large.png?m=1630643991", "name": "iphone", "avatar_normal": "https://cdn.v2ex.com/navatar/c9f0/f895/8_normal.png?m=1630643991", "title": "iPhone", "url": "https://www.v2ex.com/go/iphone", "topics": 10467, "footer": "这里绝不讨论如何获得 iPhone 盗版软件、iTunes 黑卡之类。", "header": "Say hello to the future.", "title_alternative": "iPhone", "avatar_mini": "https://cdn.v2ex.com/navatar/c9f0/f895/8_mini.png?m=1630643991", "stars": 3192, "aliases": [], "root": false, "id": 8, "parent_node_name": "apple"}, "member": {"id": 632255, "username": "hunono", "url": "https://www.v2ex.com/u/hunono", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/3eda4ab2251053a7e9e217f3a790c446?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/3eda4ab2251053a7e9e217f3a790c446?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/3eda4ab2251053a7e9e217f3a790c446?s=73&d=retro", "created": 1685696039, "last_modified": 1688366758}, "last_reply_by": "hunono", "last_touched": 1695189814, "title": "传 iPhone15 可以严格限制充电不超过 80%", "url": "https://www.v2ex.com/t/975452", "created": 1695177686, "deleted": 0, "content": "原文链接：\r\nhttps://www.macrumors.com/2023/09/19/iphone-15-80-percent-battery-limit-option/\r\n\r\n划重点：\r\n在所有 iPhone 15 机型上，设置 → 电池 → 电池健康和充电 → 充电优化下有三个选项：\r\n优化电池充电\r\n80% 限制\r\n无限制\r\n与优化电池充电一样，80% 硬限制可以通过减少电池充满电的时间来延长 iPhone 电池的使用寿命。\r\n\r\n我的感受：\r\n1 、我非常需要这个功能，因为我是极客，我希望我的手机在不拆机、不换电池的情况下最少用 4 年，而锂电池充满会极大损耗寿命（还有快充），这是物理法则，哪怕电池材料对这方面有妥协，也还是会影响寿命。我为什么讨厌拆机？因为我的其他品牌机器在官方售后换过一次东西（免费），结果防水就彻底没了，摄像头还进灰，我不想冒险破坏防水，我追求这种安心的舒适。这不是把手机当爹，就像开车一样，我会在特定路段以开出 1.5L 油车 3.6L/100km 的油耗而自豪、舒爽，也会在特定路段将油门踩到底而爽快，这就是极客。\r\n\r\n2 、苹果这一代越来越不苹果了，外接 ssd 、无加密 c 口、14 瓦的 cpu 峰值功耗，以前这类功能在 iPhone 上想都不敢想，下一代我怀疑侧载真的会上线，如果上线了我就离开苹果。以及抱着看戏的态度，看看单 cpu 最大功耗 14 瓦的 a17 ，下一代怎么开发。（关于峰值 14 瓦，链接如下 https://www.socpk.com/cpucurve/ ）", "content_rendered": "原文链接：<br /><a target=\"_blank\" href=\"https://www.macrumors.com/2023/09/19/iphone-15-80-percent-battery-limit-option/\" rel=\"nofollow noopener\">https://www.macrumors.com/2023/09/19/iphone-15-80-percent-battery-limit-option/</a><br /><br />划重点：<br />在所有 iPhone 15 机型上，设置 → 电池 → 电池健康和充电 → 充电优化下有三个选项：<br />优化电池充电<br />80% 限制<br />无限制<br />与优化电池充电一样，80% 硬限制可以通过减少电池充满电的时间来延长 iPhone 电池的使用寿命。<br /><br />我的感受：<br />1 、我非常需要这个功能，因为我是极客，我希望我的手机在不拆机、不换电池的情况下最少用 4 年，而锂电池充满会极大损耗寿命（还有快充），这是物理法则，哪怕电池材料对这方面有妥协，也还是会影响寿命。我为什么讨厌拆机？因为我的其他品牌机器在官方售后换过一次东西（免费），结果防水就彻底没了，摄像头还进灰，我不想冒险破坏防水，我追求这种安心的舒适。这不是把手机当爹，就像开车一样，我会在特定路段以开出 1.5L 油车 3.6L/100km 的油耗而自豪、舒爽，也会在特定路段将油门踩到底而爽快，这就是极客。<br /><br />2 、苹果这一代越来越不苹果了，外接 ssd 、无加密 c 口、14 瓦的 cpu 峰值功耗，以前这类功能在 iPhone 上想都不敢想，下一代我怀疑侧载真的会上线，如果上线了我就离开苹果。以及抱着看戏的态度，看看单 cpu 最大功耗 14 瓦的 a17 ，下一代怎么开发。（关于峰值 14 瓦，链接如下 <a target=\"_blank\" href=\"https://www.socpk.com/cpucurve/\" rel=\"nofollow noopener\">https://www.socpk.com/cpucurve/</a> ）", "last_modified": 1695184601, "replies": 78, "id": 975452}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/a4a0/42cf/171_large.png?m=1630576706", "name": "invest", "avatar_normal": "https://cdn.v2ex.com/navatar/a4a0/42cf/171_normal.png?m=1630576706", "title": "投资", "url": "https://www.v2ex.com/go/invest", "topics": 1202, "footer": "", "header": "Can you make money with money?", "title_alternative": "Invest", "avatar_mini": "https://cdn.v2ex.com/navatar/a4a0/42cf/171_mini.png?m=1630576706", "stars": 2329, "aliases": [], "root": false, "id": 171, "parent_node_name": "money"}, "member": {"id": 498990, "username": "U2FsdGVkX2", "url": "https://www.v2ex.com/u/U2FsdGVkX2", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/a3d9d088da744661682a11675a736229?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/a3d9d088da744661682a11675a736229?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/a3d9d088da744661682a11675a736229?s=73&d=retro", "created": 1594633573, "last_modified": 1594633573}, "last_reply_by": "Masoud2023", "last_touched": 1695189567, "title": "亲戚深陷资金盘，投了三十几万，怎么劝", "url": "https://www.v2ex.com/t/975393", "created": 1695170618, "deleted": 0, "content": "说是什么香港国际知识产权交易中心上市，让你认购原始股，今天买入 2 块一股，过段时间直接 3 块钱。\r\nhttps://imgur.com/5Hv8Kzf\r\nhttps://imgur.com/HDWib2f\r\nhttps://imgur.com/gpn1V9O\r\n\r\n\r\n这东西报警有用吗，我看他们明目张胆的在宣传", "content_rendered": "说是什么香港国际知识产权交易中心上市，让你认购原始股，今天买入 2 块一股，过段时间直接 3 块钱。<br /><a target=\"_blank\" href=\"https://imgur.com/5Hv8Kzf\" rel=\"nofollow noopener\">https://imgur.com/5Hv8Kzf</a><br /><a target=\"_blank\" href=\"https://imgur.com/HDWib2f\" rel=\"nofollow noopener\">https://imgur.com/HDWib2f</a><br /><a target=\"_blank\" href=\"https://imgur.com/gpn1V9O\" rel=\"nofollow noopener\">https://imgur.com/gpn1V9O</a><br /><br /><br />这东西报警有用吗，我看他们明目张胆的在宣传", "last_modified": 1695178309, "replies": 74, "id": 975393}]