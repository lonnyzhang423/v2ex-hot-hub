[{"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1751718333", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1751718333", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 234741, "footer": "", "header": "<!--\r\n一个更好的世界需要你持续地提出好问题。\r\n-->", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1751718333", "stars": 4420, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 714648, "username": "tiancaiXD", "url": "https://www.v2ex.com/u/tiancaiXD", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/7f32/d4c7/714648_mini.png?m=1754102777", "avatar_normal": "https://cdn.v2ex.com/avatar/7f32/d4c7/714648_normal.png?m=1754102777", "avatar_large": "https://cdn.v2ex.com/avatar/7f32/d4c7/714648_large.png?m=1754102777", "avatar_xlarge": "https://cdn.v2ex.com/avatar/7f32/d4c7/714648_xlarge.png?m=1754102777", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/7f32/d4c7/714648_xxlarge.png?m=1754102777", "created": 1728788067, "last_modified": 1754102777, "pro": 1761984702}, "last_reply_by": "tiancaiXD", "last_touched": 1761984134, "title": "身体出现明显衰老的信号", "url": "https://www.v2ex.com/t/1169856", "created": 1761968463, "deleted": 0, "content": "1 、半夜需要起床上厕所越来越频繁，没办法一觉睡到自然醒，总会被尿憋醒\r\n\r\n2 、晨勃次数变少，概率低于 2 分之 1\r\n\r\n还有哪些身体变老的信号，各位也分享下", "content_rendered": "<p>1 、半夜需要起床上厕所越来越频繁，没办法一觉睡到自然醒，总会被尿憋醒</p>\n<p>2 、晨勃次数变少，概率低于 2 分之 1</p>\n<p>还有哪些身体变老的信号，各位也分享下</p>\n", "last_modified": 1761968463, "replies": 39, "id": 1169856}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/df0a/ab05/1148_large.png?m=1751736790", "name": "claude", "avatar_normal": "https://cdn.v2ex.com/navatar/df0a/ab05/1148_normal.png?m=1751736790", "title": "Claude", "url": "https://www.v2ex.com/go/claude", "topics": 194, "footer": "", "header": "", "title_alternative": "Claude", "avatar_mini": "https://cdn.v2ex.com/navatar/df0a/ab05/1148_mini.png?m=1751736790", "stars": 168, "aliases": [], "root": false, "id": 1148, "parent_node_name": "geek"}, "member": {"id": 400140, "username": "klykq111", "url": "https://www.v2ex.com/u/klykq111", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/d79bd59412bf7444c339476e2161d085?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/d79bd59412bf7444c339476e2161d085?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/d79bd59412bf7444c339476e2161d085?s=73&d=retro", "created": 1554856563, "last_modified": 1554856563, "pro": 0}, "last_reply_by": "airqj", "last_touched": 1761980458, "title": "V 友们专属 🎉 cc && codex 抽 月卡！ 10 张~", "url": "https://www.v2ex.com/t/1169752", "created": 1761900858, "deleted": 0, "content": "bast64 : aHR0cHM6Ly9jbGF1ZGVjb2RlOC5jb20=\r\n\r\n小月卡 大概 5.7×10⁹ token \r\n\r\n\t[奖品 1]： 小月卡 × 10 张\r\n    [奖品 2]： 新用户 3k 积分 1 约等于 3.8 约等于 114M token \r\n    \r\n参与方式\r\n\r\n跟帖 UID\r\n\r\n帖在 活动在 \r\n帖不在 我能看到 活动在\r\n帖不在 group 发密语 \"vv\" 活动在\r\n帖不在 发 v 友回复截图/争取 活动子啊  \r\n\r\n双重福利 \r\n\r\n新用户 注册 3000 , group 发密语 v +2000 （对看完的 v 友福利)\r\n\r\n确保稳定 不玩虚的", "content_rendered": "<p>bast64 : aHR0cHM6Ly9jbGF1ZGVjb2RlOC5jb20=</p>\n<p>小月卡 大概 5.7×10⁹ token </p>\n<pre><code>[奖品 1]： 小月卡 × 10 张\n[奖品 2]： 新用户 3k 积分 1 约等于 3.8 约等于 114M token \n</code></pre>\n<p>参与方式</p>\n<p>跟帖 UID</p>\n<p>帖在 活动在\n帖不在 我能看到 活动在\n帖不在 group 发密语 \"vv\" 活动在\n帖不在 发 v 友回复截图/争取 活动子啊  </p>\n<p>双重福利 </p>\n<p>新用户 注册 3000 , group 发密语 v +2000 （对看完的 v 友福利)</p>\n<p>确保稳定 不玩虚的</p>\n", "last_modified": 1761965926, "replies": 36, "id": 1169752}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1751718333", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1751718333", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 234741, "footer": "", "header": "<!--\r\n一个更好的世界需要你持续地提出好问题。\r\n-->", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1751718333", "stars": 4420, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 239594, "username": "jacketma", "url": "https://www.v2ex.com/u/jacketma", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/a941f83ac4192740c2e1f95676ce23c5?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/a941f83ac4192740c2e1f95676ce23c5?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/a941f83ac4192740c2e1f95676ce23c5?s=73&d=retro", "created": 1499704166, "last_modified": 1746073077, "pro": 0}, "last_reply_by": "shawnsh", "last_touched": 1761984164, "title": "抖音不小心点赞了视频，立即取消点赞。up 主会知道谁赞了这个视频吗？", "url": "https://www.v2ex.com/t/1169833", "created": 1761960622, "deleted": 0, "content": "在抖音上点赞了别人的视频，经常收到别人的感谢信息。\r\n\r\nup 主应该都能看到是谁点赞了视频吧，点赞后，立即取消点赞。up 主还会知道谁赞了这个视频吗？", "content_rendered": "<p>在抖音上点赞了别人的视频，经常收到别人的感谢信息。</p>\n<p>up 主应该都能看到是谁点赞了视频吧，点赞后，立即取消点赞。up 主还会知道谁赞了这个视频吗？</p>\n", "last_modified": 1761960622, "replies": 35, "id": 1169833}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/3cef/96dc/949_large.png?m=1730363795", "name": "nas", "avatar_normal": "https://cdn.v2ex.com/navatar/3cef/96dc/949_normal.png?m=1730363795", "title": "NAS", "url": "https://www.v2ex.com/go/nas", "topics": 3005, "footer": "", "header": "关于网络存储设备的讨论", "title_alternative": "NAS", "avatar_mini": "https://cdn.v2ex.com/navatar/3cef/96dc/949_mini.png?m=1730363795", "stars": 2956, "aliases": [], "root": false, "id": 949, "parent_node_name": "hardware"}, "member": {"id": 758918, "username": "mystical", "url": "https://www.v2ex.com/u/mystical", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/142d/6dc1/758918_mini.png?m=1758877979", "avatar_normal": "https://cdn.v2ex.com/avatar/142d/6dc1/758918_normal.png?m=1758877979", "avatar_large": "https://cdn.v2ex.com/avatar/142d/6dc1/758918_large.png?m=1758877979", "avatar_xlarge": "https://cdn.v2ex.com/avatar/142d/6dc1/758918_xlarge.png?m=1758877979", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/142d/6dc1/758918_xxlarge.png?m=1758877979", "avatar_xxxlarge": "https://cdn.v2ex.com/avatar/142d/6dc1/758918_xxxlarge.png?m=1758877979", "created": 1753236507, "last_modified": 1758877979, "pro": 0}, "last_reply_by": "ctong", "last_touched": 1761941499, "title": "nas 的影音工具你们用的什么", "url": "https://www.v2ex.com/t/1169749", "created": 1761900738, "deleted": 0, "content": "我有个飞牛系统，飞牛的影音感觉特别好用。匹配的很准\r\n\r\n我还有个 ubuntu ，里面装了 jellyfin ，但是匹配速度提别慢，还不准。ubuntu 是开发机，装不了飞牛，有哪些好用的 linux 影印工具推荐一下，可以跑在 docker 里的那种。要求不高，能刮削海报中文字母就行", "content_rendered": "我有个飞牛系统，飞牛的影音感觉特别好用。匹配的很准<br /><br />我还有个 ubuntu ，里面装了 jellyfin ，但是匹配速度提别慢，还不准。ubuntu 是开发机，装不了飞牛，有哪些好用的 linux 影印工具推荐一下，可以跑在 docker 里的那种。要求不高，能刮削海报中文字母就行", "last_modified": 1761900738, "replies": 29, "id": 1169749}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1751718333", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1751718333", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 234741, "footer": "", "header": "<!--\r\n一个更好的世界需要你持续地提出好问题。\r\n-->", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1751718333", "stars": 4420, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 632985, "username": "seafog", "url": "https://www.v2ex.com/u/seafog", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/588a9e330b8460d19710e29c75c65f5f?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/588a9e330b8460d19710e29c75c65f5f?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/588a9e330b8460d19710e29c75c65f5f?s=73&d=retro", "created": 1686138283, "last_modified": 1687926026, "pro": 0}, "last_reply_by": "songhuyi", "last_touched": 1761280413, "title": "今天去医院，为啥交了挂号费，还有首诊费？", "url": "https://www.v2ex.com/t/1169738", "created": 1761899220, "deleted": 0, "content": "去了这么多次医院，第一次遇到这种情况，网上挂号已经交了挂号费。\r\n\r\n开完药以后，在手机上交费，怎么交都失败，提示**挂号费**和处方药不允许一起提交。\r\n\r\n仔细看账单，里面居然有一个**首诊费**。\r\n\r\n但是当时我已经从 10 楼下到一楼大厅了（我也不懂为啥挂完号要去 10 楼医生办公室看病）\r\n\r\n然后去就问了 1 楼的导诊台，还被 1 楼导诊台里的一个女的给白眼了....让我去问医生，当时差点想骂她了。\r\n\r\n但是因为自己腿不方便行走，实在折腾不动，走不动了，就懒得去 10 楼问医生。\r\n\r\n心里想着，在收费窗口，无论如何肯定能交上吧！ 就去了窗口交费。\r\n\r\n本来一共是 300 多块钱，我一扣微信支付码，只扣了 50 。\r\n\r\n然后窗口那人也不说话？？？当时我就明白了，应该是这个首诊费和药费是分开交的。\r\n\r\n就问了一句：是要再扫一次吗？\r\n\r\n窗口那人说：嗯。\r\n\r\n我内心？？？您倒是说句话啊。\r\n\r\n然后去药房拿药，开了一堆药，刚想问有没有袋子，发现药房贴着大大的**不提供袋子**。\r\n\r\n然后我就手里捧着一堆药离开。\r\n\r\n刚走到大厅出口，我就纳闷了，医院的门怎么都那么紧，非要用力推/拽才能打开。\r\n\r\n我一用力拉大门，药盒全掉地上了。。。。\r\n\r\n我当场就崩溃了，腿脚不方便和自己**强迫症（洁癖）**同时爆发。\r\n\r\n\r\n旁边保安就看着我。\r\n\r\n我小心翼翼地用右脚用力蹲下，把药捡起来，再用右脚用力，站起身。\r\n\r\n离开了医院。", "content_rendered": "<p>去了这么多次医院，第一次遇到这种情况，网上挂号已经交了挂号费。</p>\n<p>开完药以后，在手机上交费，怎么交都失败，提示<strong>挂号费</strong>和处方药不允许一起提交。</p>\n<p>仔细看账单，里面居然有一个<strong>首诊费</strong>。</p>\n<p>但是当时我已经从 10 楼下到一楼大厅了（我也不懂为啥挂完号要去 10 楼医生办公室看病）</p>\n<p>然后去就问了 1 楼的导诊台，还被 1 楼导诊台里的一个女的给白眼了....让我去问医生，当时差点想骂她了。</p>\n<p>但是因为自己腿不方便行走，实在折腾不动，走不动了，就懒得去 10 楼问医生。</p>\n<p>心里想着，在收费窗口，无论如何肯定能交上吧！ 就去了窗口交费。</p>\n<p>本来一共是 300 多块钱，我一扣微信支付码，只扣了 50 。</p>\n<p>然后窗口那人也不说话？？？当时我就明白了，应该是这个首诊费和药费是分开交的。</p>\n<p>就问了一句：是要再扫一次吗？</p>\n<p>窗口那人说：嗯。</p>\n<p>我内心？？？您倒是说句话啊。</p>\n<p>然后去药房拿药，开了一堆药，刚想问有没有袋子，发现药房贴着大大的<strong>不提供袋子</strong>。</p>\n<p>然后我就手里捧着一堆药离开。</p>\n<p>刚走到大厅出口，我就纳闷了，医院的门怎么都那么紧，非要用力推/拽才能打开。</p>\n<p>我一用力拉大门，药盒全掉地上了。。。。</p>\n<p>我当场就崩溃了，腿脚不方便和自己<strong>强迫症（洁癖）</strong>同时爆发。</p>\n<p>旁边保安就看着我。</p>\n<p>我小心翼翼地用右脚用力蹲下，把药捡起来，再用右脚用力，站起身。</p>\n<p>离开了医院。</p>\n", "last_modified": 1761899640, "replies": 20, "id": 1169738}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/f61d/6947/375_large.png?m=1658910399", "name": "go", "avatar_normal": "https://cdn.v2ex.com/navatar/f61d/6947/375_normal.png?m=1658910399", "title": "Go 编程语言", "url": "https://www.v2ex.com/go/go", "topics": 3298, "footer": "", "header": "Go 是一个开源的编程语言，它能让构造简单、可靠且高效的软件变得容易。", "title_alternative": "The Go Programming Language", "avatar_mini": "https://cdn.v2ex.com/navatar/f61d/6947/375_mini.png?m=1658910399", "stars": 4134, "aliases": [], "root": false, "id": 375, "parent_node_name": "programming"}, "member": {"id": 500446, "username": "Qjues", "url": "https://www.v2ex.com/u/Qjues", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/gravatar/2e3b5be844adf24bb237f272eb0c7791?s=24&d=retro", "avatar_normal": "https://cdn.v2ex.com/gravatar/2e3b5be844adf24bb237f272eb0c7791?s=48&d=retro", "avatar_large": "https://cdn.v2ex.com/gravatar/2e3b5be844adf24bb237f272eb0c7791?s=73&d=retro", "created": 1595482947, "last_modified": 1761903293, "pro": 0}, "last_reply_by": "ksedz", "last_touched": 1761944815, "title": "日期函数获取上一个月 bug, 在一些特殊日子才出现，比如今天 10-31", "url": "https://www.v2ex.com/t/1169781", "created": 1761906928, "deleted": 0, "content": "今天生产环境出现比较多的异常，挺纳闷的，毕竟最近该服务没有怎么迭代。\r\n\r\n经过排查定位发现，居然是某些特殊日子才会出现的问题。\r\n\r\n\r\nRetentionMonths = 3\r\nMonthTablePrefix = \"jobs_\"\r\n\r\n代码是一个分表逻辑中，获取最近月份的表，通过 `AddDate(0, -i, 0)` 函数获取前几个月的表。应返回当前月和前 3 个月的分表名数组。`[jobs_202510 jobs_202509 jobs_202508 jobs_202507]`（ golang 1.19 ）\r\n\r\n```\r\n// GetRecentHotTables 获取最近 n 个月的热表名称列表\r\nfunc (j jobPartitionRepositoryImpl) GetRecentHotTables() []string {\r\n\tmonths := RetentionMonths\r\n\r\n\ttables := make([]string, 0, months)\r\n\tnow := time.Now()\r\n\r\n\tfor i := 0; i <= months; i++ {\r\n\t\tdate := now.AddDate(0, -i, 0)\r\n\t\tyear := date.Format(\"2006\")\r\n\t\tmonth := date.Format(\"01\")\r\n\t\ttableName := fmt.Sprintf(\"%s%s%s\", MonthTablePrefix, year, month)\r\n\t\ttables = append(tables, tableName)\r\n\t}\r\n\r\n\treturn tables\r\n}\r\n```\r\n\r\n光看代码感觉是没啥问题的，为啥怀疑到这段代码，也是通过日志发现，查询表的 sql 只查 2025-10, 2025-08, 2025-07 表，缺了 2025-09 表。\r\n\r\n所以本地验证一番。（单元测试还通过了。。。因为验证的代码和里面一样。。。）\r\n\r\n```\r\n=== RUN   TestGetRecentHotTables\r\n--- PASS: TestGetRecentHotTables (0.00s)\r\n=== RUN   TestGetRecentHotTables/默认获取最近 3 个月表\r\n[jobs_202510 jobs_202510 jobs_202508 jobs_202507]\r\n    --- PASS: TestGetRecentHotTables/默认获取最近 3 个月表 (0.00s)\r\nPASS\r\n```\r\n\r\n看输出发现 `jobs_202510 jobs_202510` 有两个，问题就在这里了。\r\n\r\n```\r\nnow := time.Now()\r\nfmt.Println(now.AddDate(0, -1, 0).Format(\"200601\"))\r\n```\r\n\r\n预期是输出 202509 的，但现实是 `202510`\r\n\r\n那为什么呢？通过询问 google ，找到下面相关文章说明，大致意思就是，因为 10-31 减去一个月为 09-31, 但是又因为 9 月没有 31 号，就将日期标准化为 10-01 ，保证了 time 值的有效性。\r\n\r\nhttps://github.com/golang/go/issues/31145\r\nhttps://learnku.com/articles/71760\r\n\r\n在 learnku 文章中提到 php ，然后用 php 类似函数试了一下，也有类似问题（ php8.1 ）\r\n\r\n```\r\necho date('Y-m-d', strtotime('-1 months'));\r\n\r\n// 2025-10-01\r\n```\r\n\r\n周五给我整个这个，真是够了。\r\n\r\n修改方案, 减去当前时间的天数，时间调整到上一个月最后一天:\r\n\r\n```\r\nnow := time.Now()\r\nnow.AddDate(0, 0, -now.Day())\r\n```\r\n\r\njs moment 试了是正常的\r\n\r\n```\r\nconsole.log(moment(new Date()).subtract(1, 'months').format('YYYY-MM-DD'))\r\n```", "content_rendered": "<p>今天生产环境出现比较多的异常，挺纳闷的，毕竟最近该服务没有怎么迭代。</p>\n<p>经过排查定位发现，居然是某些特殊日子才会出现的问题。</p>\n<p>RetentionMonths = 3\nMonthTablePrefix = \"jobs_\"</p>\n<p>代码是一个分表逻辑中，获取最近月份的表，通过 <code>AddDate(0, -i, 0)</code> 函数获取前几个月的表。应返回当前月和前 3 个月的分表名数组。<code>[jobs_202510 jobs_202509 jobs_202508 jobs_202507]</code>（ golang 1.19 ）</p>\n<pre><code>// GetRecentHotTables 获取最近 n 个月的热表名称列表\nfunc (j jobPartitionRepositoryImpl) GetRecentHotTables() []string {\n\tmonths := RetentionMonths\n\n\ttables := make([]string, 0, months)\n\tnow := time.Now()\n\n\tfor i := 0; i &lt;= months; i++ {\n\t\tdate := now.AddDate(0, -i, 0)\n\t\tyear := date.Format(\"2006\")\n\t\tmonth := date.Format(\"01\")\n\t\ttableName := fmt.Sprintf(\"%s%s%s\", MonthTablePrefix, year, month)\n\t\ttables = append(tables, tableName)\n\t}\n\n\treturn tables\n}\n</code></pre>\n<p>光看代码感觉是没啥问题的，为啥怀疑到这段代码，也是通过日志发现，查询表的 sql 只查 2025-10, 2025-08, 2025-07 表，缺了 2025-09 表。</p>\n<p>所以本地验证一番。（单元测试还通过了。。。因为验证的代码和里面一样。。。）</p>\n<pre><code>=== RUN   TestGetRecentHotTables\n--- PASS: TestGetRecentHotTables (0.00s)\n=== RUN   TestGetRecentHotTables/默认获取最近 3 个月表\n[jobs_202510 jobs_202510 jobs_202508 jobs_202507]\n    --- PASS: TestGetRecentHotTables/默认获取最近 3 个月表 (0.00s)\nPASS\n</code></pre>\n<p>看输出发现 <code>jobs_202510 jobs_202510</code> 有两个，问题就在这里了。</p>\n<pre><code>now := time.Now()\nfmt.Println(now.AddDate(0, -1, 0).Format(\"200601\"))\n</code></pre>\n<p>预期是输出 202509 的，但现实是 <code>202510</code></p>\n<p>那为什么呢？通过询问 google ，找到下面相关文章说明，大致意思就是，因为 10-31 减去一个月为 09-31, 但是又因为 9 月没有 31 号，就将日期标准化为 10-01 ，保证了 time 值的有效性。</p>\n<p><a href=\"https://github.com/golang/go/issues/31145\" rel=\"nofollow\">https://github.com/golang/go/issues/31145</a>\n<a href=\"https://learnku.com/articles/71760\" rel=\"nofollow\">https://learnku.com/articles/71760</a></p>\n<p>在 learnku 文章中提到 php ，然后用 php 类似函数试了一下，也有类似问题（ php8.1 ）</p>\n<pre><code>echo date('Y-m-d', strtotime('-1 months'));\n\n// 2025-10-01\n</code></pre>\n<p>周五给我整个这个，真是够了。</p>\n<p>修改方案, 减去当前时间的天数，时间调整到上一个月最后一天:</p>\n<pre><code>now := time.Now()\nnow.AddDate(0, 0, -now.Day())\n</code></pre>\n<p>js moment 试了是正常的</p>\n<pre><code>console.log(moment(new Date()).subtract(1, 'months').format('YYYY-MM-DD'))\n</code></pre>\n", "last_modified": 1761906928, "replies": 20, "id": 1169781}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/98f1/3708/20_large.png?m=1542423096", "name": "guangzhou", "avatar_normal": "https://cdn.v2ex.com/navatar/98f1/3708/20_normal.png?m=1542423096", "title": "广州", "url": "https://www.v2ex.com/go/guangzhou", "topics": 1471, "footer": "", "header": "", "title_alternative": "Guangzhou", "avatar_mini": "https://cdn.v2ex.com/navatar/98f1/3708/20_mini.png?m=1542423096", "stars": 1498, "aliases": [], "root": false, "id": 20, "parent_node_name": "cn"}, "member": {"id": 530012, "username": "hugo7", "url": "https://www.v2ex.com/u/hugo7", "website": null, "twitter": null, "psn": null, "github": null, "btc": null, "location": null, "tagline": null, "bio": null, "avatar_mini": "https://cdn.v2ex.com/avatar/74a9/bc88/530012_mini.png?m=1761966581", "avatar_normal": "https://cdn.v2ex.com/avatar/74a9/bc88/530012_normal.png?m=1761966581", "avatar_large": "https://cdn.v2ex.com/avatar/74a9/bc88/530012_large.png?m=1761966581", "created": 1611324109, "last_modified": 1761966581, "pro": 0}, "last_reply_by": "tingyunsay", "last_touched": 1761983782, "title": "准备去广州工作了，租房求推荐", "url": "https://www.v2ex.com/t/1169850", "created": 1761967094, "deleted": 0, "content": "本人一直在上海工作，今年被裁之后找到了广州的工作，所以需要举家搬迁到广州。\r\n人生地不熟，求老哥推荐合适的房源或区域，需求如下：\r\n1. 预算封顶 3500 ，整租一室一厅或两室一厅，电梯\r\n2. 因为有车子，所以需要停车位，但是不考虑开车上下班（限外牌、停车贵等因素）\r\n3. 不想住握手楼\r\n4. 工作地点在 3 号线林和西\r\n5. 通勤时间最好控制在 40 分钟\r\n\r\n先感谢大家了🙏", "content_rendered": "本人一直在上海工作，今年被裁之后找到了广州的工作，所以需要举家搬迁到广州。<br />人生地不熟，求老哥推荐合适的房源或区域，需求如下：<br />1. 预算封顶 3500 ，整租一室一厅或两室一厅，电梯<br />2. 因为有车子，所以需要停车位，但是不考虑开车上下班（限外牌、停车贵等因素）<br />3. 不想住握手楼<br />4. 工作地点在 3 号线林和西<br />5. 通勤时间最好控制在 40 分钟<br /><br />先感谢大家了🙏", "last_modified": 1761967094, "replies": 19, "id": 1169850}, {"node": {"avatar_large": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1751718333", "name": "qna", "avatar_normal": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1751718333", "title": "问与答", "url": "https://www.v2ex.com/go/qna", "topics": 234741, "footer": "", "header": "<!--\r\n一个更好的世界需要你持续地提出好问题。\r\n-->", "title_alternative": "Questions and Answers", "avatar_mini": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1751718333", "stars": 4420, "aliases": [], "root": false, "id": 12, "parent_node_name": "v2ex"}, "member": {"id": 314139, "username": "KimWexler", "url": "https://www.v2ex.com/u/KimWexler", "website": "", "twitter": null, "psn": null, "github": null, "btc": null, "location": "", "tagline": "", "bio": "", "avatar_mini": "https://cdn.v2ex.com/avatar/421b/0b63/314139_mini.png?m=1761902256", "avatar_normal": "https://cdn.v2ex.com/avatar/421b/0b63/314139_normal.png?m=1761902256", "avatar_large": "https://cdn.v2ex.com/avatar/421b/0b63/314139_large.png?m=1761902256", "avatar_xlarge": "https://cdn.v2ex.com/avatar/421b/0b63/314139_xlarge.png?m=1761902256", "avatar_xxlarge": "https://cdn.v2ex.com/avatar/421b/0b63/314139_xxlarge.png?m=1761902256", "created": 1525404397, "last_modified": 1761902256, "pro": 0}, "last_reply_by": "siweipancc", "last_touched": 1761925612, "title": "网站近几个月被持续攻击，应该如何处理", "url": "https://www.v2ex.com/t/1169756", "created": 1761901327, "deleted": 0, "content": "问题：\r\n从 7 月份开始公司网站持续遭到攻击，攻击的模式都是一样的。一秒内会有几个不同的 IP 来请求我的首页，每个 IP 只请求一次就走了。但这会导致我的带宽耗尽。\r\n\r\n目前的手段：\r\n目前只能分析出这些异常 IP 的行为的共通点就是 chrome 版本是固定的数字.0.0.0 ，现在是直接返回 444 。但是我发现现在不少浏览器也是这样的模式，导致被拦截。\r\n\r\n尝试方案：\r\n1 、试用了一下 edgeOne 可以有效解决，上这个的话估计每个月会多消耗好几百的费用，老板估计不同意。\r\n2 、由于都是针对国内访问，套 cloudflare 感觉也不行\r\n\r\n想问下有没有其他的方案？\r\n\r\n一些日志：\r\n113.75.33.23 - - [31/Oct/2025:16:13:23 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 ＂\r\n113.93.104.94 - - [31/Oct/2025:16:13:23 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 ＂\r\n113.82.153.152 - - [31/Oct/2025:16:13:23 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 ＂\r\n116.5.143.171 - - [31/Oct/2025:16:13:23 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 ＂\r\n180.141.38.128 - - [31/Oct/2025:16:13:24 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.29 Safari/537.36 ＂\r\n113.117.59.44 - - [31/Oct/2025:16:13:24 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36 ＂\r\n116.28.171.116 - - [31/Oct/2025:16:13:24 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36 ＂\r\n183.35.9.235 - - [31/Oct/2025:16:13:24 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 ＂\r\n183.28.65.179 - - [31/Oct/2025:16:13:24 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 ＂\r\n183.19.229.186 - - [31/Oct/2025:16:13:24 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 ＂\r\n113.100.176.90 - - [31/Oct/2025:16:13:25 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 ＂\r\n218.15.50.197 - - [31/Oct/2025:16:13:25 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36 ＂", "content_rendered": "问题：<br />从 7 月份开始公司网站持续遭到攻击，攻击的模式都是一样的。一秒内会有几个不同的 IP 来请求我的首页，每个 IP 只请求一次就走了。但这会导致我的带宽耗尽。<br /><br />目前的手段：<br />目前只能分析出这些异常 IP 的行为的共通点就是 chrome 版本是固定的数字.0.0.0 ，现在是直接返回 444 。但是我发现现在不少浏览器也是这样的模式，导致被拦截。<br /><br />尝试方案：<br />1 、试用了一下 edgeOne 可以有效解决，上这个的话估计每个月会多消耗好几百的费用，老板估计不同意。<br />2 、由于都是针对国内访问，套 cloudflare 感觉也不行<br /><br />想问下有没有其他的方案？<br /><br />一些日志：<br />113.75.33.23 - - [31/Oct/2025:16:13:23 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 ＂<br />113.93.104.94 - - [31/Oct/2025:16:13:23 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 ＂<br />113.82.153.152 - - [31/Oct/2025:16:13:23 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 ＂<br />116.5.143.171 - - [31/Oct/2025:16:13:23 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 ＂<br />180.141.38.128 - - [31/Oct/2025:16:13:24 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.29 Safari/537.36 ＂<br />113.117.59.44 - - [31/Oct/2025:16:13:24 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36 ＂<br />116.28.171.116 - - [31/Oct/2025:16:13:24 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36 ＂<br />183.35.9.235 - - [31/Oct/2025:16:13:24 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 ＂<br />183.28.65.179 - - [31/Oct/2025:16:13:24 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 ＂<br />183.19.229.186 - - [31/Oct/2025:16:13:24 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 ＂<br />113.100.176.90 - - [31/Oct/2025:16:13:25 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 ＂<br />218.15.50.197 - - [31/Oct/2025:16:13:25 +0800] ＂ GET / HTTP/2.0 ＂ 444 0 ＂-＂ ＂ Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36 ＂", "last_modified": 1761901551, "replies": 17, "id": 1169756}]